<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, minimal-ui">
        <title>Terminal Debugging Utilities</title>
        <link rel="stylesheet" href="../styles/github-markdown.css">
        <link rel="stylesheet" href="../styles/prism-default.css">
        <style>
            body {
                min-width: 200px;
                max-width: 790px;
                margin: 0 auto;
                padding: 30px;
            }

            pre[class*="language-"] {
              border: 1px dashed #AAA;
              margin-bottom: 1em;
            }
        </style>
    </head>
    <body>
        <article class="markdown-body">

<h1>Terminal Debugging Utilities</h1>

<ul>
<li><a href="#1">Introduction</a></li>
<li><a href="#2">Prerequisites</a>

<ul>
<li><a href="#2.1">TCP and HTTP</a></li>
<li><a href="#2.2">OSI Model</a></li>
</ul></li>
<li><a href="#3">Utilities</a>

<ul>
<li><a href="#4">top</a>: check running processes for cpu and memory utilisation</li>
<li><a href="#5">ps</a>: see what processes are running</li>
<li><a href="#6">strace</a>: monitor interactions between processes</li>
<li><a href="#7">lsof</a>: list of open files</li>
<li><a href="#8">netstat</a>: monitoring network traffic</li>
<li><a href="#9">ifconfig</a>: configure or review your network interfaces</li>
<li><a href="#10">iftop</a>: monitors network traffic and displays table of bandwidth usage</li>
<li><a href="#11">iptraf</a>: monitoring network traffic (more visual than <code>netstat</code>, not as detailed)</li>
<li><a href="#12">tcpdump</a>: network packet sniffer</li>
<li><a href="#13">wireshark</a>: network packet sniffer and analyser (gui)</li>
<li><a href="#14">tshark</a>: network packet sniffer and analyser</li>
<li><a href="#15">telnet</a>: utility for communicating with another host</li>
</ul></li>
<li><a href="#16">Conclusion</a></li>
</ul>

<div id="1"></div>

<h2>Introduction</h2>

<p>Not all programmers need to get their hands dirty and have to dig deep into what exactly their applications or services are doing at a lower/network level. </p>

<p>This is why programmers work with programming languages, as they provide a nice high-level abstraction layer that protects us from a lot of these concerns.</p>

<p>But regardless if you&#39;re a client-side developer or a server-side developer, at some point your application will start misbehaving and it can be useful to have experience using command-line/terminal based tools to help you debug what&#39;s going on.</p>

<p>That is what I want to briefly cover today: a few select programs that you may find useful to have in your debugging toolbox. I won&#39;t claim to be an expert with any of these, but I&#39;ve had to use these tools at some point or another so I at least know what I have available to me whenever things start going haywire.</p>

<p>I&#39;d encourage you to do follow-up reading once you&#39;ve gone through this post, and to experiment with these tools if there are any in particular that you find interesting.</p>

<h4>Agony of Choice</h4>

<p>You are going to find that some of the tools I mention, have a lot of crossover behaviour between them.</p>

<p>One of the main points of confusion for people, when given the choice of lots of different utility tools, is: when/why should I use this over another very similar tool?</p>

<p>The answer: it depends (as with everything in life). </p>

<p>Sometimes it can just be a personal preference. You&#39;re happy using tool x, which can sort of do that &#39;thing&#39; you need it to, but maybe tool x isn&#39;t quite as good at showing you the &#39;thing&#39; as tool y (which was designed <em>specifically</em> to solve the &#39;thing&#39; problem); but hey, tool x is good enough at it and it also allows me to inspect y and z problems (which are things I look at the majority of the time).</p>

<p>Just be aware that that there will be crossover functionality, and that on occasions certain tools might only have <em>slight</em> additions that could be useful to you depending on the problem you&#39;re trying to debug.</p>

<div id="2"></div>

<h2>Prerequisites</h2>

<div id="2.1"></div>

<h2>TCP and HTTP</h2>

<p>The fact is in order to use tools such as <code>tcpdump</code>, <code>telnet</code> or <code>netstat</code> you do need to understand the basics of how the TCP and HTTP protocols work in order to utilise these programs fully.</p>

<p>As far as other tools are concerned, you may need to understand some networking basics. I mean, I know very little, but I know just <em>enough</em> to muddle along when I need to.</p>

<p>I&#39;ll be covering how I&#39;ve used these tools but not really much more beyond that, so you may need to do some additional reading in order to appreciate what these tools offer (outside of my own experience with them).</p>

<div id="2.2"></div>

<h2>OSI Model</h2>

<p>Finally, before we get going, it&#39;s worth taking a moment to consider the <a href="https://en.wikipedia.org/wiki/OSI_model">OSI Model</a>. What this model represents are the different layers of a system. From the very real hardware level (e.g. physical cables that make the interwebs work) right up to the software level.</p>

<p>Here is a table matrix that attempts to identify these &#39;layers&#39;:</p>

<table class="wikitable" style="margin: 1em auto 1em auto;">
  <tbody>
    <tr>
      <th colspan="5">OSI Model</th>
    </tr>
    <tr>
      <th colspan="2">Layer</th>
      <th><a href="https://en.wikipedia.org/wiki/Protocol_data_unit" title="Protocol data unit">Protocol data unit</a> (PDU)</th>
      <th>Function</th>
      <th>Examples</th>
    </tr>
    <tr>
      <th rowspan="4">Host<br>
        layers</th>
      <td style="background:#d8ec9b;">7.&nbsp;<a href="https://en.wikipedia.org/wiki/Application_layer" title="Application layer">Application</a></td>
      <td style="background:#d8ec9c;" rowspan="3"><a href="https://en.wikipedia.org/wiki/Data_(computing)" title="Data (computing)">Data</a></td>
      <td style="background:#d8ec9c;"><small>High-level <a href="https://en.wikipedia.org/wiki/API" class="mw-redirect" title="API">APIs</a>, including resource sharing, remote file access</small></td>
      <td><a href="https://en.wikipedia.org/wiki/HTTP" class="mw-redirect" title="HTTP">HTTP</a>, <a href="https://en.wikipedia.org/wiki/Network_File_System" title="Network File System">NFS</a>, <a href="https://en.wikipedia.org/wiki/FTP" class="mw-redirect" title="FTP">FTP</a>, <a href="https://en.wikipedia.org/wiki/Telnet" title="Telnet">Telnet</a>, <a href="https://en.wikipedia.org/wiki/SMTP" class="mw-redirect" title="SMTP">SMTP</a>, <a href="https://en.wikipedia.org/wiki/Secure_Shell" title="Secure Shell">SSH</a></td>
    </tr>
    <tr>
      <td style="background:#d8ec9b;">6.&nbsp;<a href="https://en.wikipedia.org/wiki/Presentation_layer" title="Presentation layer">Presentation</a></td>
      <td style="background:#d8ec9b;"><small>Translation of data between a networking service and an application; including <a href="https://en.wikipedia.org/wiki/Character_encoding" title="Character encoding">character encoding</a>, <a href="https://en.wikipedia.org/wiki/Data_compression" title="Data compression">data compression</a> and <a href="https://en.wikipedia.org/wiki/Encryption" title="Encryption">encryption/decryption</a></small></td>
      <td><a href="https://en.wikipedia.org/wiki/S/MIME" title="S/MIME">S/MIME</a>, <a href="https://en.wikipedia.org/wiki/Transport_Layer_Security" title="Transport Layer Security">TLS</a></td>
    </tr>
    <tr>
      <td style="background:#d8ec9b;">5. <a href="https://en.wikipedia.org/wiki/Session_layer" title="Session layer">Session</a></td>
      <td style="background:#d8ec9b;"><small>Managing communication <a href="https://en.wikipedia.org/wiki/Session_(computer_science)" title="Session (computer science)">sessions</a>, i.e. continuous exchange of information in the form of multiple back-and-forth transmissions between two nodes</small></td>
      <td><a href="https://en.wikipedia.org/wiki/Remote_Procedure_Call" class="mw-redirect" title="Remote Procedure Call">RPC</a>, <a href="https://en.wikipedia.org/wiki/DECnet" title="DECnet">SCP</a>, <a href="https://en.wikipedia.org/wiki/Password_authentication_protocol" class="mw-redirect" title="Password authentication protocol">PAP</a></td>
    </tr>
    <tr>
      <td style="background:#e7ed9c;">4. <a href="https://en.wikipedia.org/wiki/Transport_layer" title="Transport layer">Transport</a></td>
      <td style="background:#e7ed9c;"><a href="https://en.wikipedia.org/wiki/Packet_segmentation" title="Packet segmentation">Segment</a> (TCP) / <a href="https://en.wikipedia.org/wiki/Datagram" title="Datagram">Datagram</a> (UDP)</td>
      <td style="background:#e7ed9c;"><small>Reliable transmission of data segments between points on a network, including <a href="https://en.wikipedia.org/wiki/Packet_segmentation" title="Packet segmentation">segmentation</a>, <a href="https://en.wikipedia.org/wiki/Acknowledgement_(data_networks)" title="Acknowledgement (data networks)">acknowledgement</a> and <a href="https://en.wikipedia.org/wiki/Multiplexing" title="Multiplexing">multiplexing</a></small></td>
      <td><a href="https://en.wikipedia.org/wiki/Transmission_Control_Protocol" title="Transmission Control Protocol">TCP</a>, <a href="https://en.wikipedia.org/wiki/User_Datagram_Protocol" title="User Datagram Protocol">UDP</a>, <a href="https://en.wikipedia.org/wiki/NetBIOS_Frames_protocol" title="NetBIOS Frames protocol">NBF</a></td>
    </tr>
    <tr>
      <th rowspan="3">Media<br>
        layers</th>
      <td style="background:#eddc9c;">3. <a href="https://en.wikipedia.org/wiki/Network_layer" title="Network layer">Network</a></td>
      <td style="background:#eddc9c;"><a href="https://en.wikipedia.org/wiki/Network_packet" title="Network packet">Packet</a></td>
      <td style="background:#eddc9c;"><small>Structuring and managing a multi-node network, including <a href="https://en.wikipedia.org/wiki/Address_space" title="Address space">addressing</a>, <a href="https://en.wikipedia.org/wiki/Routing" title="Routing">routing</a> and <a href="https://en.wikipedia.org/wiki/Network_traffic_control" title="Network traffic control">traffic control</a></small></td>
      <td><a href="https://en.wikipedia.org/wiki/IPv4" title="IPv4">IPv4</a>, <a href="https://en.wikipedia.org/wiki/IPv6" title="IPv6">IPv6</a>, <a href="https://en.wikipedia.org/wiki/Internet_Control_Message_Protocol" title="Internet Control Message Protocol">ICMP</a>, <a href="https://en.wikipedia.org/wiki/IPsec" title="IPsec">IPsec</a>, <a href="https://en.wikipedia.org/wiki/Connectionless_Network_Protocol" class="mw-redirect" title="Connectionless Network Protocol">CLNP</a>, <a href="https://en.wikipedia.org/wiki/AppleTalk#Datagram_Delivery_Protocol" title="AppleTalk">DDP</a></td>
    </tr>
    <tr>
      <td style="background:#e9c189;">2. <a href="https://en.wikipedia.org/wiki/Data_link_layer" title="Data link layer">Data link</a></td>
      <td style="background:#e9c189;"><a href="https://en.wikipedia.org/wiki/Frame_(networking)" title="Frame (networking)">Frame</a></td>
      <td style="background:#e9c189;"><small>Reliable transmission of data frames between two nodes connected by a physical layer</small></td>
      <td><a href="https://en.wikipedia.org/wiki/IEEE_802.2" title="IEEE 802.2">IEEE 802.2</a>, <a href="https://en.wikipedia.org/wiki/L2TP" class="mw-redirect" title="L2TP">L2TP</a>, <a href="https://en.wikipedia.org/wiki/LLDP" class="mw-redirect" title="LLDP">LLDP</a>, <a href="https://en.wikipedia.org/wiki/Media_access_control" title="Media access control">IEEE 802 MAC layers</a> (<a href="https://en.wikipedia.org/wiki/Ethernet" title="Ethernet">Ethernet</a>, <a href="https://en.wikipedia.org/wiki/IEEE_802.11" title="IEEE 802.11">IEEE 802.11</a>, etc.), <a href="https://en.wikipedia.org/wiki/Point-to-Point_Protocol" title="Point-to-Point Protocol">PPP</a>, <a href="https://en.wikipedia.org/wiki/Asynchronous_Transfer_Mode" title="Asynchronous Transfer Mode">ATM</a>, <a href="https://en.wikipedia.org/wiki/Multiprotocol_Label_Switching" title="Multiprotocol Label Switching">MPLS</a></td>
    </tr>
    <tr>
      <td style="background:#e9988a;">1. <a href="https://en.wikipedia.org/wiki/Physical_layer" title="Physical layer">Physical</a></td>
      <td style="background:#e9988a;"><a href="https://en.wikipedia.org/wiki/Bit" title="Bit">Bit</a></td>
      <td style="background:#e9988a;"><small>Transmission and reception of raw bit streams over a physical medium</small></td>
      <td><a href="https://en.wikipedia.org/wiki/DOCSIS" title="DOCSIS">DOCSIS</a>, <a href="https://en.wikipedia.org/wiki/DSL" class="mw-redirect" title="DSL">DSL</a>, <a href="https://en.wikipedia.org/wiki/IEEE_802" title="IEEE 802">IEEE 802</a> physical layers (<a href="https://en.wikipedia.org/wiki/Ethernet_physical_layer" title="Ethernet physical layer">Ethernet</a>, <a href="https://en.wikipedia.org/wiki/IEEE_802.11" title="IEEE 802.11">IEEE 802.11</a>, etc.), <a href="https://en.wikipedia.org/wiki/ISDN" class="mw-redirect" title="ISDN">ISDN</a>, <a href="https://en.wikipedia.org/wiki/RS-232" title="RS-232">RS-232</a></td>
    </tr>
  </tbody>
</table>

<!--
<table>
    <tr>
        <th></th>
        <th>Layer</th>
        <th>Protocols</th>
        <th>Description</th>
    </tr>
    <tr>
        <td>7.</td>
        <td>Application</td>
        <td>HTTP, FTP, SMTP</td>
        <td>Window for user app processes</td>
    </tr>
    <tr>
        <td>6.</td>
        <td>Presentation</td>
        <td>JPEG, GIF, MPEG</td>
        <td>Format the data to be presented to the Application layer (network translator)</td>
    </tr>
    <tr>
        <td>5.</td>
        <td>Session</td>
        <td>RPC, SQL, NFS</td>
        <td>Allow session establishment between processes running on different stations</td>
    </tr>
    <tr>
        <td>4.</td>
        <td>Transport</td>
        <td>TCP, UDP, SPX</td>
        <td>Flow control, ensures all messages are delivered error-free, in sequence, no losses or duplications</td>
    </tr>
    <tr>
        <td>3.</td>
        <td>Network</td>
        <td>IP, IPX, ICMP</td>
        <td>Routers control operation of subnet, deciding physical path data takes</td>
    </tr>
    <tr>
        <td>2.</td>
        <td>Data Link</td>
        <td>PPP/SLIP</td>
        <td>Provides error-free transfer of data over physical layer</td>
    </tr>
    <tr>
        <td>1.</td>
        <td>Physical</td>
        <td>Hub</td>
        <td>Physical structure (cables, hubs etc)</td>
    </tr>
</table>
-->

<blockquote>
<p>Note: you&#39;ll find many differing versions of the OSI Model (i.e. the layers described are always the same, but you may see more or less protocols defined depending on what version you look at), this is just one such version copied vertabim from Wikipedia</p>
</blockquote>

<p>The reason this is useful, is because you can identify which layer the relevant tools are operating at. Tools like <code>netstat</code> operate at layer four (transport: <code>tcp</code>), where as <code>telnet</code> operates at layer seven (application: it actually has its own protocol <code>telnet</code>).</p>

<p>When debugging an issue, if you know the problem space is a particular layer of the OSI model, then you&#39;ll have an easier time identifying which tool is best suited to the investigation.</p>

<div id="3"></div>

<h2>Utilities</h2>

<p>There are <em>many</em> different utilities, some provided as built-ins to your OS, others might be <a href="https://www.gnu.org/home.en.html">GNU</a> flavoured or home grown (e.g. they can be built using a myriad of programming languages) and which you have to download separately.</p>

<p>The ones listed below are a selection of tools I find particularly useful for different scenarios. But they&#39;re not all available on the Mac OS (which is what I use, and which - I&#39;m making a <em>massive</em> assumption - you are likely using too).</p>

<p>I do provide basic installation instructions for some of the tools that aren&#39;t available for the Mac OS (either natively or at all) and for those tools that aren&#39;t available for <em>your</em> OS, I would recommend using <a href="https://www.docker.com/">Docker</a> for testing them out. </p>

<p>I&#39;d suggest for the purpose of this article to try one of the following if you don&#39;t want/use Mac OS:</p>

<pre><code class="language-bash">docker run -it centos /bin/bash

# or

docker run -it ubuntu /bin/bash
</code></pre>

<blockquote>
<p>Also, the usage between Mac OS and Linux can vary<br>
Example: <code>top -n</code> on Mac shows only n number of items; Linux runs n number of ticks before stopping<br>
If you notice something different, then it&#39;ll likely be the OS<br>
But ultimately the examples I give are for Mac OS (unless stated otherwise)</p>
</blockquote>

<p>With all that out of the way, let&#39;s begin...</p>

<div id="4"></div>

<h2>top</h2>

<p><strong>Summary</strong>: displays running processes with cpu and memory utilisation</p>

<p>The <code>top</code> command displays processor activity and also displays tasks managed by the kernel in real-time. If you have a cluster of nodes that are setup to scale up based on either CPU or Memory usage, then your first starting point will be to jump onto a running instance and check the different processes running and what their consumption is.</p>

<p>Or maybe an application on your laptop is running very slowly? You can inspect its CPU consumption to see if it&#39;s doing something odd and maxing out at 99%</p>

<p><a href="../images/shell-top.jpg">
    <img src="../images/shell-top.jpg">
</a></p>

<p>Here are some basic commands:</p>

<ul>
<li><p><code>top -user &lt;user&gt;</code>: filter processes by those run by specified user</p>

<blockquote>
<p>e.g. <code>top -user $(who | awk &#39;NR==1 {print $1}&#39;)</code></p>
</blockquote></li>
<li><p><code>top -n 10</code>: stops command running after 10 intervals</p>

<blockquote>
<p>otherwise runs forever or until <code>&lt;Ctrl-c&gt;</code> (<code>SIGINT</code> &quot;interrupt&quot; signal received)</p>
</blockquote></li>
</ul>

<p>You can change which column controls the order display (the default being CPU) by typing <code>o</code> and then typing the column name. For example:</p>

<ul>
<li><code>+command</code>: order by the COMMAND column (ascending order)</li>
<li><code>-command</code>: order by the COMMAND column (descending order)</li>
</ul>

<blockquote>
<p><code>+</code> is implied (so no need to type it)</p>
</blockquote>

<p>The following key strokes can be executed whilst <code>top</code> is running...</p>

<ul>
<li><code>z</code>: toggles on/off ability to have currently running processes highlighted</li>
</ul>

<h4>Non-Mac</h4>

<p>On the non-Mac version of <code>top</code> you may find that you need the output to show you the complete path to the running program (which can be handy if you don&#39;t recognise the program, and want to know where it&#39;s located):</p>

<ul>
<li><code>c</code>: toggles on/off absolute path for the COMMAND</li>
</ul>

<p>Similarly for non-Mac versions you can dynamically change the refresh rate:</p>

<ul>
<li><code>d</code>: change interval for screen/data refresh</li>
</ul>

<p>Finally one other useful thing for non-Mac versions is the ability to kill a process you don&#39;t like the look of:</p>

<ul>
<li><code>k</code>: followed by PID of process you want to kill</li>
</ul>

<p>I mention the above non-Mac options because when debugging on a remote server, chances are you&#39;ll need some of those details more.</p>

<p>Failing all that you could just install the man pages and double check the available options (or run a Docker container and double check them): </p>

<pre><code class="language-bash">apt-get update &amp;&amp; apt-get install man
</code></pre>

<p>There are also some pretty fancy alternatives, such as:</p>

<ul>
<li><a href="http://hisham.hm/htop/"><code>brew install htop</code></a></li>
<li><a href="https://github.com/MrRio/vtop"><code>npm install -g vtop</code></a> (node)</li>
</ul>

<div id="5"></div>

<h2>ps</h2>

<p><strong>Summary</strong>: displays snapshot of running processes</p>

<p>The <code>ps</code> command is useful for seeing &#39;at a glance&#39; what process id&#39;s have been provided to different programs and which user started them (as well as the relationship between processes). </p>

<p>Majority of the time you&#39;ll use <code>ps</code> just to identify the process id (<code>pid</code>) so you can then utilise another tool for inspecting the relevant process.</p>

<p><a href="../images/shell-ps.jpg">
    <img src="../images/shell-ps.jpg">
</a></p>

<p>The differences between <code>ps</code> and <code>top</code> are subtle, both display details about active processes (albeit in different formats). But <code>top</code> is continuous where as <code>ps</code> is just a snapshop.</p>

<p>The <code>ps</code> command also offers some more advanced display options, not just a table matrix, and these can help visualise the parent/children relationship for particular processes.</p>

<p>Here are some useful commands you can try:</p>

<ul>
<li><code>ps aux</code>: shows all running processes (even those without a tty or are not owned by you)</li>
<li><code>ps axjf</code>: shows parent process (ppids) &amp; nested children pids with tree formatting</li>
</ul>

<blockquote>
<p>Note: the <code>f</code> option doesn&#39;t work the same on Mac OS (<code>man ps</code> for details)</p>
</blockquote>

<div id="6"></div>

<h2>strace</h2>

<p><strong>Summary</strong>: monitors interactions between processes, by highlighting what syscalls are being made</p>

<p>So <code>strace</code> is awesome for understanding <em>exactly</em> what your application is doing. If you have (just for example) a Python or Ruby app, then you should know that all the function calls it makes are actually abstractions provided by the language.</p>

<p>Most high-level languages are written in C, and so those abstracted functions will end up calling some internal C functions and those C functions will end up making OS level system calls.</p>

<p>It&#39;s these &#39;system calls&#39; that you&#39;ll end up tracing/tracking with <code>strace</code>.</p>

<p><a href="../images/shell-strace.jpg">
    <img src="../images/shell-strace.jpg">
</a></p>

<p>This utility isn&#39;t available on Mac OS, so you&#39;ll need Linux:</p>

<p>With Ubuntu:</p>

<pre><code class="language-bash">apt-get update &amp;&amp; apt-get install strace
</code></pre>

<p>With CentOS:</p>

<pre><code class="language-bash">yum install strace
</code></pre>

<blockquote>
<p>Mac OS has <code>dtrace</code> but it does use quite different commands from <code>strace</code><br>
Although I have seen articles online that help translate</p>
</blockquote>

<p>You can run <code>strace</code> against a new process, like so:</p>

<pre><code class="language-bash">strace ls -l
</code></pre>

<p>But you can also <em>attach</em> strace to an already running process! This is great for debugging an application that&#39;s misbehaving out in the wild. You would do that like so:</p>

<pre><code class="language-bash">strace -p &lt;process_id&gt;
</code></pre>

<p>So let&#39;s consider a simple example where we want to see what the shell command <code>ls -l</code> is actually doing. First let&#39;s trace it to get an idea of the output you&#39;ll see:</p>

<pre><code class="language-bash">strace ls -l

execve(&quot;/bin/ls&quot;, [&quot;ls&quot;, &quot;-l&quot;], [/* 23 vars */]) = 0
brk(0)                                  = 0x109a000
access(&quot;/etc/ld.so.nohwcap&quot;, F_OK)      = -1 ENOENT (No such file or directory)
mmap(NULL, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f22f946a000
access(&quot;/etc/ld.so.preload&quot;, R_OK)      = -1 ENOENT (No such file or directory)
open(&quot;/etc/ld.so.cache&quot;, O_RDONLY|O_CLOEXEC) = 3
fstat(3, {st_mode=S_IFREG|0644, st_size=32096, ...}) = 0
mmap(NULL, 32096, PROT_READ, MAP_PRIVATE, 3, 0) = 0x7f22f9462000
close(3)                                = 0
access(&quot;/etc/ld.so.nohwcap&quot;, F_OK)      = -1 ENOENT (No such file or directory)
open(&quot;/lib/x86_64-linux-gnu/libselinux.so.1&quot;, O_RDONLY|O_CLOEXEC) = 3
read(3, &quot;\177ELF\2\1\1\0\0\0\0\0\0\0\0\0\3\0&gt;\0\1\0\0\0\0[\0\0\0\0\0\0&quot;..., 832) = 832
fstat(3, {st_mode=S_IFREG|0644, st_size=134296, ...}) = 0
mmap(NULL, 2238192, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x7f22f9027000
mprotect(0x7f22f9047000, 2093056, PROT_NONE) = 0
mmap(0x7f22f9246000, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x1f000) = 0x7f22f9246000
mmap(0x7f22f9248000, 5872, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_ANONYMOUS, -1, 0) = 0x7f22f9248000
close(3)                                = 0
access(&quot;/etc/ld.so.nohwcap&quot;, F_OK)      = -1 ENOENT (No such file or directory)
open(&quot;/lib/x86_64-linux-gnu/libacl.so.1&quot;, O_RDONLY|O_CLOEXEC) = 3
read(3, &quot;\177ELF\2\1\1\0\0\0\0\0\0\0\0\0\3\0&gt;\0\1\0\0\0`\34\0\0\0\0\0\0&quot;..., 832) = 832
fstat(3, {st_mode=S_IFREG|0644, st_size=31168, ...}) = 0
mmap(NULL, 2126336, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x7f22f8e1f000
mprotect(0x7f22f8e26000, 2093056, PROT_NONE) = 0
mmap(0x7f22f9025000, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x6000) = 0x7f22f9025000
close(3)                                = 0
access(&quot;/etc/ld.so.nohwcap&quot;, F_OK)      = -1 ENOENT (No such file or directory)
open(&quot;/lib/x86_64-linux-gnu/libc.so.6&quot;, O_RDONLY|O_CLOEXEC) = 3
read(3, &quot;\177ELF\2\1\1\0\0\0\0\0\0\0\0\0\3\0&gt;\0\1\0\0\0P \2\0\0\0\0\0&quot;..., 832) = 832
fstat(3, {st_mode=S_IFREG|0755, st_size=1840928, ...}) = 0
mmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f22f9461000
mmap(NULL, 3949248, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x7f22f8a5a000
mprotect(0x7f22f8c14000, 2097152, PROT_NONE) = 0
mmap(0x7f22f8e14000, 24576, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x1ba000) = 0x7f22f8e14000
mmap(0x7f22f8e1a000, 17088, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_ANONYMOUS, -1, 0) = 0x7f22f8e1a000
close(3)                                = 0
access(&quot;/etc/ld.so.nohwcap&quot;, F_OK)      = -1 ENOENT (No such file or directory)
open(&quot;/lib/x86_64-linux-gnu/libpcre.so.3&quot;, O_RDONLY|O_CLOEXEC) = 3
read(3, &quot;\177ELF\2\1\1\0\0\0\0\0\0\0\0\0\3\0&gt;\0\1\0\0\0\260\27\0\0\0\0\0\0&quot;..., 832) = 832
fstat(3, {st_mode=S_IFREG|0644, st_size=252032, ...}) = 0
mmap(NULL, 2347200, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x7f22f881c000
mprotect(0x7f22f8859000, 2093056, PROT_NONE) = 0
mmap(0x7f22f8a58000, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x3c000) = 0x7f22f8a58000
close(3)                                = 0
access(&quot;/etc/ld.so.nohwcap&quot;, F_OK)      = -1 ENOENT (No such file or directory)
open(&quot;/lib/x86_64-linux-gnu/libdl.so.2&quot;, O_RDONLY|O_CLOEXEC) = 3
read(3, &quot;\177ELF\2\1\1\0\0\0\0\0\0\0\0\0\3\0&gt;\0\1\0\0\0\320\16\0\0\0\0\0\0&quot;..., 832) = 832
fstat(3, {st_mode=S_IFREG|0644, st_size=14664, ...}) = 0
mmap(NULL, 2109744, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x7f22f8618000
mprotect(0x7f22f861b000, 2093056, PROT_NONE) = 0
mmap(0x7f22f881a000, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x2000) = 0x7f22f881a000
close(3)                                = 0
access(&quot;/etc/ld.so.nohwcap&quot;, F_OK)      = -1 ENOENT (No such file or directory)
open(&quot;/lib/x86_64-linux-gnu/libattr.so.1&quot;, O_RDONLY|O_CLOEXEC) = 3
read(3, &quot;\177ELF\2\1\1\0\0\0\0\0\0\0\0\0\3\0&gt;\0\1\0\0\0\300\20\0\0\0\0\0\0&quot;..., 832) = 832
fstat(3, {st_mode=S_IFREG|0644, st_size=18624, ...}) = 0
mmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f22f9460000
mmap(NULL, 2113760, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x7f22f8413000
mprotect(0x7f22f8417000, 2093056, PROT_NONE) = 0
mmap(0x7f22f8616000, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x3000) = 0x7f22f8616000
close(3)                                = 0
mmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f22f945f000
mmap(NULL, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f22f945d000
arch_prctl(ARCH_SET_FS, 0x7f22f945d840) = 0
mprotect(0x7f22f8e14000, 16384, PROT_READ) = 0
mprotect(0x7f22f8616000, 4096, PROT_READ) = 0
mprotect(0x7f22f881a000, 4096, PROT_READ) = 0
mprotect(0x7f22f8a58000, 4096, PROT_READ) = 0
mprotect(0x7f22f9025000, 4096, PROT_READ) = 0
mprotect(0x7f22f9246000, 4096, PROT_READ) = 0
mprotect(0x619000, 4096, PROT_READ)     = 0
mprotect(0x7f22f946c000, 4096, PROT_READ) = 0
munmap(0x7f22f9462000, 32096)           = 0
statfs(&quot;/sys/fs/selinux&quot;, 0x7ffca795ea30) = -1 ENOENT (No such file or directory)
statfs(&quot;/selinux&quot;, 0x7ffca795ea30)      = -1 ENOENT (No such file or directory)
brk(0)                                  = 0x109a000
brk(0x10bb000)                          = 0x10bb000
open(&quot;/proc/filesystems&quot;, O_RDONLY)     = 3
fstat(3, {st_mode=S_IFREG|0444, st_size=0, ...}) = 0
mmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f22f9469000
read(3, &quot;nodev\tsysfs\nnodev\trootfs\nnodev\tr&quot;..., 1024) = 384
read(3, &quot;&quot;, 1024)                       = 0
close(3)                                = 0
munmap(0x7f22f9469000, 4096)            = 0
open(&quot;/usr/lib/locale/locale-archive&quot;, O_RDONLY|O_CLOEXEC) = 3
fstat(3, {st_mode=S_IFREG|0644, st_size=1607664, ...}) = 0
mmap(NULL, 1607664, PROT_READ, MAP_PRIVATE, 3, 0) = 0x7f22f92d4000
close(3)                                = 0
ioctl(1, SNDCTL_TMR_TIMEBASE or SNDRV_TIMER_IOCTL_NEXT_DEVICE or TCGETS, {B38400 opost isig icanon echo ...}) = 0
ioctl(1, TIOCGWINSZ, {ws_row=53, ws_col=172, ws_xpixel=1895, ws_ypixel=1171}) = 0
open(&quot;/usr/share/locale/locale.alias&quot;, O_RDONLY|O_CLOEXEC) = 3
fstat(3, {st_mode=S_IFREG|0644, st_size=2570, ...}) = 0
mmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f22f9469000
read(3, &quot;# Locale name alias data base.\n#&quot;..., 4096) = 2570
read(3, &quot;&quot;, 4096)                       = 0
close(3)                                = 0
munmap(0x7f22f9469000, 4096)            = 0
open(&quot;/usr/share/locale/en_US.UTF-8/LC_TIME/coreutils.mo&quot;, O_RDONLY) = -1 ENOENT (No such file or directory)
open(&quot;/usr/share/locale/en_US.utf8/LC_TIME/coreutils.mo&quot;, O_RDONLY) = -1 ENOENT (No such file or directory)
open(&quot;/usr/share/locale/en_US/LC_TIME/coreutils.mo&quot;, O_RDONLY) = -1 ENOENT (No such file or directory)
open(&quot;/usr/share/locale/en.UTF-8/LC_TIME/coreutils.mo&quot;, O_RDONLY) = -1 ENOENT (No such file or directory)
open(&quot;/usr/share/locale/en.utf8/LC_TIME/coreutils.mo&quot;, O_RDONLY) = -1 ENOENT (No such file or directory)
open(&quot;/usr/share/locale/en/LC_TIME/coreutils.mo&quot;, O_RDONLY) = -1 ENOENT (No such file or directory)
open(&quot;/usr/share/locale-langpack/en_US.UTF-8/LC_TIME/coreutils.mo&quot;, O_RDONLY) = -1 ENOENT (No such file or directory)
open(&quot;/usr/share/locale-langpack/en_US.utf8/LC_TIME/coreutils.mo&quot;, O_RDONLY) = -1 ENOENT (No such file or directory)
open(&quot;/usr/share/locale-langpack/en_US/LC_TIME/coreutils.mo&quot;, O_RDONLY) = -1 ENOENT (No such file or directory)
open(&quot;/usr/share/locale-langpack/en.UTF-8/LC_TIME/coreutils.mo&quot;, O_RDONLY) = -1 ENOENT (No such file or directory)
open(&quot;/usr/share/locale-langpack/en.utf8/LC_TIME/coreutils.mo&quot;, O_RDONLY) = -1 ENOENT (No such file or directory)
open(&quot;/usr/share/locale-langpack/en/LC_TIME/coreutils.mo&quot;, O_RDONLY) = -1 ENOENT (No such file or directory)
open(&quot;/usr/lib/x86_64-linux-gnu/gconv/gconv-modules.cache&quot;, O_RDONLY) = 3
fstat(3, {st_mode=S_IFREG|0644, st_size=26258, ...}) = 0
mmap(NULL, 26258, PROT_READ, MAP_SHARED, 3, 0) = 0x7f22f9463000
close(3)                                = 0
openat(AT_FDCWD, &quot;.&quot;, O_RDONLY|O_NONBLOCK|O_DIRECTORY|O_CLOEXEC) = 3
getdents(3, /* 10 entries */, 32768)    = 296
getdents(3, /* 0 entries */, 32768)     = 0
close(3)                                = 0
open(&quot;/usr/share/locale/en_US.UTF-8/LC_MESSAGES/coreutils.mo&quot;, O_RDONLY) = -1 ENOENT (No such file or directory)
open(&quot;/usr/share/locale/en_US.utf8/LC_MESSAGES/coreutils.mo&quot;, O_RDONLY) = -1 ENOENT (No such file or directory)
open(&quot;/usr/share/locale/en_US/LC_MESSAGES/coreutils.mo&quot;, O_RDONLY) = -1 ENOENT (No such file or directory)
open(&quot;/usr/share/locale/en.UTF-8/LC_MESSAGES/coreutils.mo&quot;, O_RDONLY) = -1 ENOENT (No such file or directory)
open(&quot;/usr/share/locale/en.utf8/LC_MESSAGES/coreutils.mo&quot;, O_RDONLY) = -1 ENOENT (No such file or directory)
open(&quot;/usr/share/locale/en/LC_MESSAGES/coreutils.mo&quot;, O_RDONLY) = -1 ENOENT (No such file or directory)
open(&quot;/usr/share/locale-langpack/en_US.UTF-8/LC_MESSAGES/coreutils.mo&quot;, O_RDONLY) = -1 ENOENT (No such file or directory)
open(&quot;/usr/share/locale-langpack/en_US.utf8/LC_MESSAGES/coreutils.mo&quot;, O_RDONLY) = -1 ENOENT (No such file or directory)
open(&quot;/usr/share/locale-langpack/en_US/LC_MESSAGES/coreutils.mo&quot;, O_RDONLY) = -1 ENOENT (No such file or directory)
open(&quot;/usr/share/locale-langpack/en.UTF-8/LC_MESSAGES/coreutils.mo&quot;, O_RDONLY) = -1 ENOENT (No such file or directory)
open(&quot;/usr/share/locale-langpack/en.utf8/LC_MESSAGES/coreutils.mo&quot;, O_RDONLY) = -1 ENOENT (No such file or directory)
open(&quot;/usr/share/locale-langpack/en/LC_MESSAGES/coreutils.mo&quot;, O_RDONLY) = -1 ENOENT (No such file or directory)
fstat(1, {st_mode=S_IFCHR|0620, st_rdev=makedev(136, 2), ...}) = 0
mmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f22f9462000
write(1, &quot;total 0\n&quot;, 8total 0
)                = 8
close(1)                                = 0
munmap(0x7f22f9462000, 4096)            = 0
close(2)                                = 0
exit_group(0)                           = ?
+++ exited with 0 +++
</code></pre>

<p>OK... so that&#39;s a lot of noise. So let&#39;s see if we can&#39;t quieten it down a bit by using the count flag <code>-c</code>:</p>

<pre><code class="language-bash">strace -c ls -l

total 0
% time     seconds  usecs/call     calls    errors syscall
------ ----------- ----------- --------- --------- ----------------
  0.00    0.000000           0        10           read
  0.00    0.000000           0         1           write
  0.00    0.000000           0        35        24 open
  0.00    0.000000           0        14           close
  0.00    0.000000           0        12           fstat
  0.00    0.000000           0        25           mmap
  0.00    0.000000           0        14           mprotect
  0.00    0.000000           0         4           munmap
  0.00    0.000000           0         3           brk
  0.00    0.000000           0         2           ioctl
  0.00    0.000000           0         8         8 access
  0.00    0.000000           0         1           execve
  0.00    0.000000           0         2           getdents
  0.00    0.000000           0         2         2 statfs
  0.00    0.000000           0         1           arch_prctl
  0.00    0.000000           0         1           openat
------ ----------- ----------- --------- --------- ----------------
100.00    0.000000                   135        34 total
</code></pre>

<p>Now <em>that&#39;s</em> better. We get a good overview of what syscalls have been made by the <code>ls</code> program, how many times and the overall time involved for each type of function. </p>

<p>But as you can see, when tracing a program that only lists the files in a directory (i.e. <code>ls -l</code>), you&#39;re not going to see much in the way of &#39;time&#39;. So let&#39;s use <code>lsof</code> (will read more about this later), which can take a few seconds to run:</p>

<pre><code class="language-bash">strace -c lsof

% time     seconds  usecs/call     calls    errors syscall
------ ----------- ----------- --------- --------- ----------------
 66.25    0.018456           7      2479           write
  7.11    0.001980           1      1405           read
  4.44    0.001237           1      2067        12 stat
  3.77    0.001051           1      2074      1021 close
  3.61    0.001007           4       244           alarm
  3.08    0.000857           2       543           munmap
  2.18    0.000608           2       244           rt_sigaction
  2.06    0.000575         575         1           wait4
  1.72    0.000479           1       554           fstat
  1.70    0.000474           1       875        57 readlink
  1.30    0.000363           0       834        20 open
  0.84    0.000235           0       507           lstat
  0.83    0.000230           0       568           mmap
  0.60    0.000167           1       222           openat
  0.42    0.000116           8        14           recvmsg
  0.09    0.000024           0       444           getdents
  0.00    0.000000           0         2           poll
  0.00    0.000000           0        17           lseek
  0.00    0.000000           0        18           mprotect
  0.00    0.000000           0        13           brk
  0.00    0.000000           0         1           ioctl
  0.00    0.000000           0        11        11 access
  0.00    0.000000           0         2           pipe
  0.00    0.000000           0         1           getpid
  0.00    0.000000           0        14           socket
  0.00    0.000000           0         7         6 connect
  0.00    0.000000           0         8           sendto
  0.00    0.000000           0         1           recvfrom
  0.00    0.000000           0         7           setsockopt
  0.00    0.000000           0         1           clone
  0.00    0.000000           0         1           execve
  0.00    0.000000           0         5           uname
  0.00    0.000000           0         1           umask
  0.00    0.000000           0         1           getrlimit
  0.00    0.000000           0         1           getuid
  0.00    0.000000           0         1           getgid
  0.00    0.000000           0         1           geteuid
  0.00    0.000000           0         1           getegid
  0.00    0.000000           0         1           arch_prctl
------ ----------- ----------- --------- --------- ----------------
100.00    0.027859                 13191      1127 total
</code></pre>

<p>OK <em>that</em> output is a bit more practical, as we can see that the <code>write</code> syscall took approximately 66% of the overall time of the program to run. If this was your own application you might consider that an issue worth delving into more deeply.</p>

<p>If you want to get a rough idea for what some of these system calls mean, then use the below quick guide (otherwise <a href="https://www.google.co.uk/search?q=close&amp;sitesearch=man7.org/linux/man-pages">Google is your friend</a>):</p>

<table>
  <tbody>
    <tr>
      <th>Syscall</th>
      <th>What it does?</th>
    </tr>
    <tr>
      <td>
        <tt>read</tt></td>
      <td>read bytes from a file descriptor (file, socket)</td></tr>
    <tr>
      <td>
        <tt>write</tt></td>
      <td>write bytes from a file descriptor (file, socket)</td></tr>
    <tr>
      <td>
        <tt>open</tt></td>
      <td>open a file (returns a file descriptor)</td></tr>
    <tr>
      <td>
        <tt>close</tt></td>
      <td>close a file descriptor</td></tr>
    <tr>
      <td>
        <tt>fork</tt></td>
      <td>create a new process (current process is forked)</td></tr>
    <tr>
      <td>
        <tt>exec</tt></td>
      <td>execute a new program</td></tr>
    <tr>
      <td>
        <tt>connect</tt></td>
      <td>connect to a network host</td></tr>
    <tr>
      <td>
        <tt>accept</tt></td>
      <td>accept a network connection</td></tr>
    <tr>
      <td>
        <tt>stat</tt></td>
      <td>read file statistics</td></tr>
    <tr>
      <td>
        <tt>ioctl</tt></td>
      <td>set I/O properties, or other miscellaneous functions</td></tr>
    <tr>
      <td>
        <tt>mmap</tt></td>
      <td>map a file to the process memory address space</td></tr>
    <tr>
      <td>
        <tt>brk</tt></td>
      <td>extend the heap pointer</td></tr>
  </tbody>
</table>

<p>For debugging with <code>strace</code> I&#39;d suggest using the <code>-c</code> flag first so you get a feel for any particular system calls that stand out as being quite odd.</p>

<p>Maybe you notice a lot of network connections being opened and your app is showing signs of struggling with throughput. So you might then use <code>strace</code> without the <code>-c</code> so you could delve into the specific details.</p>

<p>If you&#39;re debugging on a remote server that&#39;s running a web app, you might attach strace to the running server process and then start manually <code>curl</code>ing endpoints to see what sort of reaction the server has.</p>

<p>Maybe you only want to look out for certain types of system calls. In that case you can utilise filters (<code>-e</code>). In the following example we&#39;re only interested in the <code>open</code>, <code>connect</code> and <code>access</code> syscalls:</p>

<pre><code class="language-bash">strace -e trace=open,connect,access lsof
</code></pre>

<blockquote>
<p>Note: you can use <code>!</code> to negate the filter (see <code>man strace</code>)</p>
</blockquote>

<p>You might also find that using the <code>-t</code> flag useful for tracking <em>when</em> the call was made:</p>

<pre><code class="language-bash">strace -t -e trace=access lsof

19:01:00 access(&quot;/etc/ld.so.nohwcap&quot;, F_OK) = -1 ENOENT (No such file or directory)
19:01:00 access(&quot;/etc/ld.so.preload&quot;, R_OK) = -1 ENOENT (No such file or directory)
19:01:00 access(&quot;/etc/ld.so.nohwcap&quot;, F_OK) = -1 ENOENT (No such file or directory)
</code></pre>

<p>As you can see <code>strace</code> is a really useful tool when the time comes.</p>

<p>...and the time <em>will</em> come.</p>

<p>By the way, you should be careful with backgrounded processes. If you attach to a backgrounded process running in the same shell instance as your <code>strace</code> execution, then you&#39;ll be locked up.</p>

<blockquote>
<p>Note: although <code>strace</code> is amazing, you might also want to read <a href="http://www.brendangregg.com/blog/2014-05-11/strace-wow-much-syscall.html">this article</a> that discusses the oft-ignored performance overhead of using it in production</p>
</blockquote>

<div id="7"></div>

<h2>lsof</h2>

<p><strong>Summary</strong>: lists open files</p>

<p><a href="../images/shell-lsof.jpg">
    <img src="../images/shell-lsof.jpg">
</a></p>

<p>So we actually saw this used earlier when looking at <code>strace</code>. It will display all open files, and any one who knows a bit about operating systems will realise that an open file could in fact be any of the following:</p>

<ul>
<li>a regular file</li>
<li>a directory</li>
<li>a block special file</li>
<li>a character special file</li>
<li>an executing text reference</li>
<li>a library</li>
<li>a stream or a network file (Internet socket, NFS file or UNIX domain socket)</li>
</ul>

<p>This means that <code>lsof</code> isn&#39;t as pointless as you may have initially thought. Considering nearly everything in a *nix environment &#39;is a file&#39; (including network sockets).</p>

<p>In order to use this command, let&#39;s see some simple examples:</p>

<ul>
<li><code>lsof -u &lt;user&gt;</code>: filter results by specific user</li>
<li><code>lsof -i TCP:22 -n</code>: lists all running processes on port 22 (ssh)</li>
<li><code>lsof -i 4</code>: display only IPv4 network files</li>
</ul>

<p>For example, with that last command (show the IPv4 network files) running on my Mac OS laptop, I see all sorts of processes such as: Slack, Chrome, Spotify etc. Lots of interesting information</p>

<p>This is one of those tools that might not get used very often, but when the right problem occurs it can be a real time saver being able to see what files your machine has open.</p>

<div id="8"></div>

<h2>netstat</h2>

<p><strong>Summary</strong>: monitors network traffic</p>

<p>The <code>netstat</code> (network statistics) command is useful because it allows us to see network connections for TCP (both incoming and outgoing), routing tables, and a number of network interface and network protocol statistics. </p>

<p>This gives us an insight into what network communications are going on and whether certain services are talking to the right endpoints, how often and whether their connections are being established or terminated correctly.</p>

<p><a href="../images/shell-netstat.jpg">
    <img src="../images/shell-netstat.jpg">
</a></p>

<p>Here are some useful examples you can try out:</p>

<ul>
<li><code>netstat -a</code>: show both listening and non-listening sockets (for TCP this means established connections)</li>
<li><code>netstat -l</code>: show just listening sockets</li>
<li><code>netstat -lt</code>: show just tcp sockets</li>
<li><code>netstat -lu</code>: show just udp sockets</li>
<li><code>netstat -aep</code>: extend to show the user and also the pids</li>
<li><code>netstat -aepn</code>: don&#39;t translate host names (e.g. show ip instead)</li>
<li><code>netstat -aepT</code>: show host name but don&#39;t truncate it</li>
<li><code>netstat -ax</code>: show just UNIX domain sockets</li>
<li><code>netstat -st</code>: shows summary of connections (useful for identifying TCP connection issues)</li>
<li><code>netstat -lc &lt;n_seconds&gt;</code>: show listening sockets whilst continously refreshing every n seconds</li>
<li><code>netstat -atepn</code>: nice &#39;general&#39; all-rounder (see below for example output)</li>
</ul>

<pre><code class="language-bash">Active Internet connections (servers and established)
Proto Recv-Q Send-Q Local Address               Foreign Address             State       User       Inode      PID/Program name   
tcp        0      0 0.0.0.0:8126                0.0.0.0:*                   LISTEN      0          8934       1071/statsd         
tcp        0      0 0.0.0.0:8080                0.0.0.0:*                   LISTEN      498        10087      1355/puma 2.14.0 (t 
tcp        0      0 0.0.0.0:22                  0.0.0.0:*                   LISTEN      0          8763       1196/sshd           
tcp        0      0 127.0.0.1:24220             0.0.0.0:*                   LISTEN      497        9296       1307/ruby           
tcp        0      0 10.6.4.51:57228             10.6.31.176:6379            ESTABLISHED 498        218757     1355/puma 2.14.0 (t 
tcp        0      0 10.6.4.51:57224             10.6.31.176:6379            ESTABLISHED 498        218743     1355/puma 2.14.0 (t 
tcp        0      0 10.6.4.51:8080              10.6.8.80:48205             ESTABLISHED 498        229190     1355/puma 2.14.0 (t 
tcp        0      0 10.6.4.51:57231             10.6.31.176:6379            ESTABLISHED 498        218766     1355/puma 2.14.0 (t 
tcp        0      0 10.6.4.51:57225             10.6.31.176:6379            ESTABLISHED 498        218747     1355/puma 2.14.0 (t 
tcp        0      0 10.6.4.51:8080              10.6.6.76:51764             ESTABLISHED 498        10111      1355/puma 2.14.0 (t 
tcp       53      0 10.6.4.51:56870             54.231.142.40:443           ESTABLISHED 497        229141     1307/ruby           
tcp        1      0 127.0.0.1:34704             127.0.0.1:8080              CLOSE_WAIT  48         226010     20286/httpd
</code></pre>

<ul>
<li><code>netstat -r</code>: shows routing table (see below for example output)</li>
</ul>

<pre><code class="language-bash">Kernel IP routing table
Destination     Gateway         Genmask         Flags   MSS Window  irtt Iface
10.6.0.0        *               255.255.248.0   U         0 0          0 eth0
link-local      *               255.255.0.0     U         0 0          0 eth0
default         ip-xx-x-x-x.eu- 0.0.0.0         UG        0 0          0 eth0
</code></pre>

<p>Effectively, if you&#39;ve any kind of network issues, then this tool can help you potentially identify where it&#39;s coming from or going (or if it&#39;s not coming from or going to the expected source/destination).</p>

<div id="9"></div>

<h2>ifconfig</h2>

<p><strong>Summary</strong>: configure or review your network interfaces</p>

<p>The <code>ifconfig</code> command is used to configure or review your network interfaces and can help you identify if there is a problem with your network (such as no Ethernet or WiFi or maybe your connections are misbehaving due to misconfiguration).</p>

<p>Because networking is a big topic, and I&#39;m not very good at it, I&#39;ll refer you to the following article which provides a breakdown of typical data ouput: <a href="http://www.aboutlinux.info/2006/11/ifconfig-dissected-and-demystified.html">www.aboutlinux.info/2006/11/ifconfig-dissected-and-demystified</a></p>

<p><a href="../images/shell-ifconfig.jpg">
    <img src="../images/shell-ifconfig.jpg">
</a></p>

<p>If you don&#39;t want to configure a network interface, then running the <code>ifconfig</code> command without any arguments will display all existing network interfaces:</p>

<pre><code class="language-bash">eth0      Link encap:Ethernet  HWaddr 0A:05:1E:A5:6F:FF  
          inet addr:10.6.4.51  Bcast:10.6.7.255  Mask:255.255.248.0
          inet6 addr: fe80::805:1eff:fea5:6fff/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:9001  Metric:1
          RX packets:8776319 errors:0 dropped:0 overruns:0 frame:0
          TX packets:4212889 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:10239965628 (9.5 GiB)  TX bytes:10967533931 (10.2 GiB)
          Interrupt:155 

lo        Link encap:Local Loopback  
          inet addr:127.0.0.1  Mask:255.0.0.0
          inet6 addr: ::1/128 Scope:Host
          UP LOOPBACK RUNNING  MTU:65536  Metric:1
          RX packets:341240 errors:0 dropped:0 overruns:0 frame:0
          TX packets:341240 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:31612016 (30.1 MiB)  TX bytes:31612016 (30.1 MiB)
</code></pre>

<p>We can see above that we have a single Ethernet card (<code>eth0</code>) and a loop back interface (<code>lo</code>)</p>

<blockquote>
<p>In newer Linux OS&#39; <code>eth&lt;n&gt;</code> is replaced by <code>p2p&lt;n&gt;</code><br>
And on the Mac OS it becomes <code>en&lt;n&gt;</code></p>
</blockquote>

<p>For more information on Network ips and how they&#39;re created (i.e. CIDRs), then you might be interested in <a href="https://gist.github.com/Integralist/cff468ba808fbca09602">this quick gist</a> (but it&#39;s only basic information, so you might have better luck with your own Googling)</p>

<div id="10"></div>

<h2>iftop</h2>

<p><strong>Summary</strong>: monitors network traffic and displays table of bandwidth usage</p>

<p>The <code>iftop</code> command is useful for identifying things like &quot;why is our connection so slow?&quot;. It&#39;s equivalent to a tool like <code>top</code> when understanding CPU usage. </p>

<p>The command listens to network traffic on a named interface and displays a table of current bandwidth usage by pairs of hosts.</p>

<p><a href="../images/shell-iftop.jpg">
    <img src="../images/shell-iftop.jpg">
</a></p>

<p>This utility isn&#39;t available by default on any OS, so with Mac OS:</p>

<pre><code class="language-bash">brew install iftop
</code></pre>

<p>With Ubuntu:</p>

<pre><code class="language-bash">apt-get update &amp;&amp; apt-get install iftop
</code></pre>

<p>With CentOS:</p>

<pre><code class="language-bash">yum install wget libpcap -y
wget http://pkgs.repoforge.org/iftop/iftop-0.17-1.el6.rf.x86_64.rpm
rpm -ivh iftop-0.17-1.el6.rf.x86_64.rpm
</code></pre>

<p>Below is a simple command to get you started:</p>

<pre><code class="language-bash">sudo iftop -P -i en1
</code></pre>

<blockquote>
<p>Note: use <code>ifconfig</code> to find the interface you&#39;re interested in</p>
</blockquote>

<p>I personally find the standard output useful (as per image above), but if you press <code>?</code> while the program is running you&#39;ll see lots of additional options you can try:</p>

<pre><code class="language-bash">Host display:                          General:
 n - toggle DNS host resolution         P - pause display
 s - toggle show source host            h - toggle this help display
 d - toggle show destination host       b - toggle bar graph display
 t - cycle line display mode            B - cycle bar graph average
                                        T - toggle cumulative line totals
Port display:                           j/k - scroll display
 N - toggle service resolution          f - edit filter code
 S - toggle show source port            l - set screen filter
 D - toggle show destination port       L - lin/log scales
 p - toggle port display                ! - shell command
                                        q - quit
Sorting:
 1/2/3 - sort by 1st/2nd/3rd column
 &lt; - sort by source name
 &gt; - sort by dest name
 o - freeze current order
</code></pre>

<div id="11"></div>

<h2>iptraf</h2>

<p><strong>Summary</strong>: monitors network traffic (more visual than <code>netstat</code>, but not as detailed)</p>

<p><a href="../images/shell-iptraf.jpg">
    <img src="../images/shell-iptraf.jpg">
</a></p>

<p>This utility isn&#39;t available on Mac OS, so you&#39;ll need Linux:</p>

<p>With Ubuntu:</p>

<pre><code class="language-bash">apt-get update &amp;&amp; apt-get install iptraf
</code></pre>

<p>With CentOS:</p>

<pre><code class="language-bash">yum install iptraf
</code></pre>

<p>Because <code>iptraf</code> requires a lot of user interaction to get into different sections of the tool, I&#39;ll have to just leave it up to you to explore.</p>

<p>But you&#39;ll see options like <code>IP traffic monitor</code>, which can be useful viewing. Personally I don&#39;t find <code>iptraf</code> as useful as tools such as <code>iftop</code>. But it&#39;s here for you nonetheless.</p>

<div id="12"></div>

<h2>tcpdump</h2>

<p><strong>Summary</strong>: network packet sniffer</p>

<p>tcpdump is a powerful and widely used command-line package analyzer, which is used to capture or filter TCP/IP packets received or transferred over a network on a specific interface.</p>

<p>We can save the output of this program into a <code>pcap</code> file format, that can then be viewed by either tcpdump itself or via an open source GUI based tool such as <a href="#13">Wireshark</a> that reads pcap format files and visualises the data.</p>

<p><a href="../images/shell-tcpdump.jpg">
    <img src="../images/shell-tcpdump.jpg">
</a></p>

<p>The following are some examples to help you understand how to execute <code>tcpdump</code>, but be aware that on some hosts you might need to run it with <code>sudo</code>:</p>

<ul>
<li><code>tcpdump -D</code>: show available network interfaces</li>
<li><code>tcpdump -i eth0 -c 5</code>: capture n packets from specific network interface</li>
<li><code>tcpdump -i eth0 -c 5 -w 0001.pcap</code>: send output to pcap file</li>
<li><code>tcpdump -r 0001.pcap</code>: read back out the pcap file content for later analysis</li>
<li><code>tcpdump -n -i eth0 -c 1</code>: converts dns hostnames into ip addresses instead</li>
<li><code>tcpdump -n -i eth0 -c 10 tcp</code>: capture only tcp packets</li>
<li><code>tcpdump -n -i eth0 -c 10 port 22 and port 80</code>: capture packets from specific ports</li>
<li><code>tcpdump -i eth0 src &lt;ip&gt;</code>: capture packets from a specific source ip</li>
<li><code>tcpdump -i eth0 dst &lt;ip&gt;</code>: capture packets for a specific destination ip</li>
<li><code>tcpdump -i eth0 src port 80 or dst port 80</code>: filter all HTTP traffic to or from port 80</li>
<li><code>tcpdump -i eth0 -s 0</code>: include contents of each packet (not just the packet header)</li>
<li><code>tcpdump -vvv -s 0 -l -n port 53 -XX</code>: watch all DNS traffic (which happens on port 53)</li>
</ul>

<blockquote>
<p>If you run tcpdump on a remote server, you&#39;ll want to use the <code>-w</code> flag to record the data into a pcap file, this is so you can scp the file back to your local machine for later aggregation/analysis with either tcpdump itself (<code>-r</code>) or by importing the pcap file into another tool such as <a href="#13"><code>wireshark</code></a> or <a href="#14"><code>tshark</code></a></p>
</blockquote>

<p>The output of the program may look a little confusing but there is consistent structure you can look out for:</p>

<pre><code class="language-bash">&lt;date_time&gt; &lt;protocol&gt; &lt;src&gt; &gt; &lt;dest&gt;: Flags[&lt;type&gt;] &lt;data&gt;
</code></pre>

<blockquote>
<p>Note: the <code>&gt;</code> always sits between <code>src</code> and <code>dest</code> and indicates the direction of the request</p>
</blockquote>

<h4>Flags</h4>

<p>Flags aren&#39;t always present, depending on the network transfer that has been recorded, but when it is you&#39;ll usually see one of the following:</p>

<ul>
<li><code>[U] URG</code>: used to identify incoming data as &#39;urgent&#39;. Such incoming segments do not have to wait until the previous segments are consumed by the receiving end but are sent directly and processed immediately</li>
<li><code>[A] ACK</code>:  the receiver will send an ACK that equals the senders sequence number</li>
<li><code>[P] PSH</code>: push exists to ensure that the data is given the priority (used quite frequently at the beginning and end of a data transfer, affecting the way the data is handled at both ends)</li>
<li><code>[R] RST</code>: used when a segment arrives that is not intended for the current connection (remote host rejects packet and resets connection) </li>
<li><code>[S] SYN</code>: initially sent when establishing the classic 3-way handshake between two hosts (one sent by Host A and one sent back with ACK by Host B)</li>
<li><code>[F] FIN</code>: used to tear down the virtual connections created using the previous flag (SYN)</li>
</ul>

<h4>Data</h4>

<p>You&#39;ll typically see more information within the &#39;data&#39; output to indicate information about the packets being passed between hosts. </p>

<p>One such example would be seeing <code>win</code> specified. This is a sliding &#39;window&#39; that represents the size of the packets being sent back and forth. </p>

<p>You&#39;ll also typically see an ACK (acknowledgement packet), and that it won&#39;t be sent until the previous packet has been completely received (this is to help with consistency of specific sequence numbers and the ability to signify packets have been missed). </p>

<p>The <code>win</code> is also used for flow control. An example of this is where one end of the communication is having trouble keeping up with the number of packets and so they modify the window buffer to be a smaller packet size to allow themselves to catch up with their processing of data.</p>

<h4>Last Packet?</h4>

<p>Although nothing to do with tcpdump, it is worth understanding (for the sake of debugging) that the <code>FIN</code> flag doesn&#39;t necessarily indicate the last packet has just been sent. Here is an example to explain:</p>

<ul>
<li>Host A receives what it believes to be the last data packet</li>
<li>So Host A sends a <code>FIN</code> to tell Host B it&#39;s closing its connection, along with an <code>ACK</code> to acknowledge Host B&#39;s last data packet</li>
<li>Host B sends an <code>ACK</code> to acknowledge receipt of Host A&#39;s <code>FIN</code></li>
<li>Host B then sends its own <code>FIN</code> and <code>ACK</code> to close its connection down</li>
<li>Host A sends a final <code>ACK</code> to acknowledge Host B&#39;s last communication was received</li>
</ul>

<div id="13"></div>

<h2>wireshark</h2>

<p><strong>Summary</strong>: network packet sniffer and analyser (gui)</p>

<p>Wireshark is a network protocol analyzer.<br>
It lets you see what&#39;s happening on your network at a microscopic level.</p>

<p><a href="../images/shell-wireshark.jpg">
    <img src="../images/shell-wireshark.jpg">
</a></p>

<p>There&#39;s not a lot I can say about Wireshark other than you really will need to know how certain network protocols (such as TCP) work in order to understand the output that&#39;s being recorded.</p>

<p>The output will look very similar to what <code>tcpdump</code> provides (depending on what network traffic you&#39;re recording), and is a really useful tool for easier interrogation of pcap files created by <code>tcpdump</code>.</p>

<p>This utility isn&#39;t available by default on any OS, so with Mac OS:</p>

<pre><code class="language-bash">brew install wireshark --with-qt5
</code></pre>

<blockquote>
<p>Note: sometimes the flags that are available change. So I would suggest running the command <code>brew cat wireshark</code> first to see what&#39;s available first.</p>
</blockquote>

<p>With Ubuntu:</p>

<pre><code class="language-bash">apt-get update &amp;&amp; apt-get install wireshark
</code></pre>

<p>With CentOS:</p>

<pre><code class="language-bash">yum install wireshark
</code></pre>

<p>I typically have only ever used Wireshark with pcap files I&#39;ve created via <code>tcpdump</code> so that&#39;s what I&#39;ll demonstrate here. There are two ways to open the pcap file in Wireshark.</p>

<ol>
<li><p>execute <code>wireshark</code> from the terminal, which will open the gui, and from the gui interface select &quot;Open Capture File&quot;.</p></li>
<li><p>execute <code>wireshark -r /path/to/pcap/file</code></p></li>
</ol>

<blockquote>
<p>Note: if you just want to use Wireshark to monitor all network traffic, then execute <code>sudo wireshark -i &lt;interface&gt;</code> (use <code>ifconfig</code> or <code>sudo wireshark -D</code> to see what interfaces are available). Once the gui is open it&#39;ll have the specified interface pre-selected, so just double-click on it to start recording its traffic</p>
</blockquote>

<p>Every time there is (for example) a HTTP request, there might end up being 200 TCP packets recorded, which can be (as you could imagine) difficult to recognize and make sense of manually. </p>

<p>But this problem can be simplified within Wireshark by clicking on &quot;Statistics&quot; and then &quot;Conversations&quot;, where it will organize all these disparate packets into TCP sessions for you. Thus making analysing the data much easier.</p>

<h4>Docker?</h4>

<p>One thing I did notice when trying to use this tool with Docker, was that you must run the container in privileged mode:</p>

<pre><code class="language-bash">docker run --privileged
</code></pre>

<p>Otherwise you&#39;ll see: </p>

<pre><code class="language-ini">can&#39;t run /usr/sbin/dumpcap: Operation not permitted
</code></pre>

<p>Apparently <code>--security-opt seccomp:unconfined</code> is an alternative option.</p>

<p>The following is taken and paraphrased from the Docker website:</p>

<blockquote>
<p>Doing this will allow Docker to access all devices on the host as well as set some configuration to allow the container to nearly all the same access to the host as processes running outside the containers on the host.</p>
</blockquote>

<p>For more details, please refer to the <a href="https://docs.docker.com/engine/reference/run/#/runtime-privilege-and-linux-capabilities">documentation</a>.</p>

<div id="14"></div>

<h2>tshark</h2>

<p><strong>Summary</strong>: network packet sniffer and analyser (cli version of wireshark)</p>

<p>Tshark is a network protocol analyzer, but a terminal based one.<br>
It lets you see what&#39;s happening on your network at a microscopic level.</p>

<p><a href="../images/shell-tshark.jpg">
    <img src="../images/shell-tshark.jpg">
</a></p>

<p>As mentioned above in the Wireshark section, to get access to <code>tshark</code> on the Mac OS you need to install Wireshark. There are separate installs though for other OS&#39;.</p>

<p>With Ubuntu:</p>

<pre><code class="language-bash">apt-get update &amp;&amp; apt-get install tshark
</code></pre>

<p>With CentOS:</p>

<pre><code class="language-bash">yum install tshark
</code></pre>

<p>I&#39;ve only used tshark a few times and typically I find using the Wireshark gui better for interpretting tcpdump data (which has so far been one of my primary use cases; e.g. debugging traffic occuring on a remote server).</p>

<p>But the benefit of tshark, outside of those of us who love living inside the terminal, is the ability to automate analysis without the need for a gui. This means we can write scripts to process the data we&#39;ve recorded and so becomes a very powerful tool.</p>

<p>Similar to Wireshark, if you want to read in a pcap file then you would use the <code>-r</code> flag to point to its location on your file system:</p>

<pre><code class="language-bash">tshark -r /path/to/pcap/file
</code></pre>

<p>Also you can just run tshark and have it monitor <em>all</em> network traffic on your host machine or just a specific interface (using the <code>-i</code> flag). There is also the <code>-D</code> flag for having it show you all available interfaces you can listen on.</p>

<p>The tshark command knows a lot more about what&#39;s going on inside your TCP packets than tcpdump and so you have more options available to you in order to filter out the data you&#39;re interested in:</p>

<pre><code class="language-bash">sudo tshark -i any \
            -R &#39;http.request.method == &quot;GET&quot;&#39; \
            -T fields \
            -e http.request.method -e http.request.uri -e ip.dst
</code></pre>

<p>In the above example we&#39;re &#39;explicitly&#39; listening on all interfaces for network traffic. We then filter out all packets except those which are a <code>HTTP GET</code> request.</p>

<p>Now instead of just showing <em>all</em> the data for the <code>HTTP GET</code> requests that come through we use the <code>-T</code> flag to indicate that we&#39;re interested only in &#39;fields&#39; being displayed. We then can use the <code>-e</code> flag to indicate which subset of &#39;fields&#39; we want to show.</p>

<p>In this case we&#39;ve chosen to display the request method (i.e. <code>GET</code>), the URI that was associated with the GET and the ip address associated with it.</p>

<h4>Filtering Example</h4>

<p>One very real example I had recently was the need to inspect DNS traffic and to identify the TTL record values returned by the DNS resolutions happening on port 53.</p>

<p>I had used <code>tcpdump</code> to record the relevant traffic:</p>

<pre><code class="language-bash">tcpdump -vvv -s 0 -l -n port 53 -XX -w dns-traffic.pcap
</code></pre>

<p>I then was able to pass this into tshark to automate the extraction of useful data, all without having to consult the Wireshark gui (meaning I could do this within the same environment as the data was recorded in if I wanted to):</p>

<pre><code class="language-bash">tshark -r ~/dns-traffic.pcap -T fields -e dns.resp.ttl -e dns.resp.name
</code></pre>

<p>One useful trick some people aren&#39;t aware of, is that if you are writing automation scripts with tshark but you&#39;re unsure of how to access specific data fields, then just use Wireshark <em>temporarily</em> to figure out the fields you need.</p>

<p>For example, if you open the pcap in wireshark, you can find the filter you need by selecting the data manually via the UI and then right-click&#39;ing the relevant data field and selecting &quot;Prepare a Filter &gt; Selected&quot;. This will generate the exact value you would assign to the tshark <code>-e</code> flag.</p>

<div id="15"></div>

<h2>telnet</h2>

<p><strong>Summary</strong>: utility for communicating with another host</p>

<p>Telnet is both a tool <code>telnet</code> <em>and</em> a Network Protocol of the same name: Telnet. The <code>telnet</code> program is used for interactive communication to a remote/external host on a given port. Once the connection to the remote host is established, an HTTP request can be sent to the host by typing it in the prompt.</p>

<p><a href="../images/shell-telnet.jpg">
    <img src="../images/shell-telnet.jpg">
</a></p>

<p>Telnet&#39;s usage nowadays is a little limited due to the massive success of protocols such as SSH, but it can be interesting to play around with (although I&#39;ve never really had much of a &#39;need&#39; for it myself).</p>

<p>To use the command you type <code>telnet &lt;host&gt; &lt;port&gt;</code>. Once &#39;connected&#39; to the host you need to provide a command to be executed, for example a <code>GET</code> request. </p>

<p>Below is an example of making a GET request. First we must connect:</p>

<pre><code class="language-bash">telnet www.google.com 80
</code></pre>

<p>We will get the following response:</p>

<pre><code class="language-bash">Trying 87.237.19.30...
Connected to www.google.com.
Escape character is &#39;^]&#39;.
</code></pre>

<p>From here we can provide our request:</p>

<pre><code class="language-bash">GET #q=cars HTTP/1.1
</code></pre>

<blockquote>
<p>Note: you need to press <Enter> twice to send the request</p>
</blockquote>

<p>From here we get the following response:</p>

<pre><code class="language-bash">HTTP/1.1 302 Found
Location: http://www.google.co.uk/?gws_rd=cr&amp;ei=k7BjV-GbFOLOgAbd3JbADw#q=cars
Cache-Control: private
Content-Type: text/html; charset=UTF-8
P3P: CP=&quot;This is not a P3P policy! See https://www.google.com/support/accounts/answer/151657?hl=en for more info.&quot;
Date: Fri, 17 Jun 2016 08:10:59 GMT
Server: gws
Content-Length: 268
X-XSS-Protection: 1; mode=block
X-Frame-Options: SAMEORIGIN
Set-Cookie: NID=80=R8K0WhuF432ccZzjpchtEPHx-vv1n-9tuoe8P6V2yyNC2h1sd_JB7Q1afFZPo5W9MjvP8UL1ZZ_8UQDHeb3OpGDRNlSNfPkJWqE9JKa9hAJG02wlk7s8eIRy786p7-8U; expires=Sat, 17-Dec-2016 08:10:59 GMT; path=/; domain=.google.com; HttpOnly

&lt;HTML&gt;&lt;HEAD&gt;&lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html;charset=utf-8&quot;&gt;
&lt;TITLE&gt;302 Moved&lt;/TITLE&gt;&lt;/HEAD&gt;&lt;BODY&gt;
&lt;H1&gt;302 Moved&lt;/H1&gt;
The document has moved
&lt;A HREF=&quot;http://www.google.co.uk/?gws_rd=cr&amp;amp;ei=k7BjV-GbFOLOgAbd3JbADw#q=cars&quot;&gt;here&lt;/A&gt;.
&lt;/BODY&gt;&lt;/HTML&gt;
Connection closed by foreign host.
</code></pre>

<p>If we try a similar request with the BBC site, we&#39;ll see we get a 404 not found:</p>

<pre><code class="language-bash">$ telnet www.bbc.co.uk 80
Trying 212.58.244.66...
Connected to www.bbc.net.uk.
Escape character is &#39;^]&#39;.
GET /news HTTP/1.1

HTTP/1.1 404 Not Found
Content-Type: text/html
Date: Fri, 17 Jun 2016 08:13:29 GMT
Connection: Keep-Alive
Content-Length: 50591
</code></pre>

<div id="16"></div>

<h2>Conclusion</h2>

<p>There you have it. A whirlwind run down of different terminal based debugging tools. The primary one&#39;s (for me) being:</p>

<ul>
<li><code>strace</code></li>
<li><code>tcpdump</code></li>
<li><code>wireshark</code></li>
<li><code>tshark</code></li>
</ul>

<p>Obivously they all have their specialisms and unique features. I&#39;ve not even scratched the surface of what they can do. If you know of anything really useful that I&#39;ve missed, then let me know.</p>

            <hr>
            <h2>Links</h2>
            <ul>
                <li><a href="../index.html">Home</a></li>
                <li><a href="../posts/about.html">About Me</a></li>
                <li><a href="https://github.com/integralist">GitHub</a></li>
                <li><a href="https://twitter.com/integralist">Twitter</a></li>
                <li><a href="http://www.integralist.co.uk/resume">Resume</a></li>
            </ul>
        </article>
        <script src="../scripts/prism.js"></script>
        <script>
            var _gaq=[['_setAccount','UA-33159515-1'],['_trackPageview']];
            (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
            g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
            s.parentNode.insertBefore(g,s)}(document,'script'));
        </script>
    </body>
</html>
