<!DOCTYPE HTML>
<!--
	Editorial by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
  <head>
    <title>Integralist</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="../../assets/css/main.css" />
  </head>
  <body class="is-preload">
    <!-- Wrapper -->
    <div id="wrapper">
      <!-- Main -->
      <div id="main">
        <div class="inner">
          <!-- Header -->
					<header id="header">
						<a href="../../index.html" class="logo"><strong>Home</strong></a>
							<ul class="icons">
							<!--<li><a href="https://x.com/integralist" class="icon brands fa-twitter" target="blank"><span class="label">Twitter</span></a></li>-->
							<!--<li><a href="https://instagram.com/wwfsuperstarsofwrestling" class="icon brands fa-instagram" target="blank"><span class="label">Instagram</span></a></li>-->
						</ul>
					</header>

          <!-- Content -->
          <section>
						<!--
            <header class="main">
              <h1>Royal Rumble 1989</h1>
              <p>A Bizarre Spectacle Where the Madness Multiplies</p>
            </header>
            <span class="image main"><img src="../images/rumble-89.jpg" alt="" /></span>
						-->
						<nav>

<ul>
<li><a href="#hashing-encryption-and-encoding">Hashing, Encryption and Encoding</a>
<ul>
<li><a href="#introduction">Introduction</a></li>

<li><a href="#terminology">Terminology</a></li>

<li><a href="#hashing-vs-encryption">Hashing vs Encryption</a>
<ul>
<li><a href="#why-use-a-hash-function">Why use a hash function?</a></li>
</ul></li>

<li><a href="#base64-encoding">Base64 Encoding</a></li>

<li><a href="#mac-vs-hmac">MAC vs HMAC</a></li>

<li><a href="#random-password-generation">Random Password Generation</a></li>

<li><a href="#hash-functions">Hash Functions</a>
<ul>
<li><a href="#shasum">shasum</a></li>

<li><a href="#hashlib">hashlib</a></li>

<li><a href="#cksum">cksum</a></li>
</ul></li>

<li><a href="#openssh">OpenSSH</a>
<ul>
<li><a href="#ssh-agent">SSH Agent</a></li>
</ul></li>

<li><a href="#openssl">OpenSSL</a>
<ul>
<li><a href="#key-exchanges">Key Exchanges</a></li>

<li><a href="#generating-a-key-pair">Generating a key pair</a></li>

<li><a href="#encrypting-and-decrypting">Encrypting and Decrypting</a>
<ul>
<li><a href="#encoding">Encoding</a></li>

<li><a href="#salts">Salts</a></li>

<li><a href="#asymmetrical-encryption">Asymmetrical Encryption</a></li>
</ul></li>

<li><a href="#randomness">Randomness</a></li>
</ul></li>

<li><a href="#gpg">GPG</a>
<ul>
<li><a href="#generating-a-key-pair-1">Generating a key pair</a></li>

<li><a href="#automate">Automate</a></li>

<li><a href="#revocation">Revocation</a></li>

<li><a href="#asymmetrical-encryption-and-decryption">Asymmetrical Encryption and Decryption</a></li>

<li><a href="#symmetrical-encryption-and-decryption">Symmetrical Encryption and Decryption</a></li>

<li><a href="#signing-keys">Signing keys</a></li>

<li><a href="#signing-encrypted-files">Signing encrypted files</a></li>
</ul></li>

<li><a href="#keybase">Keybase</a></li>
</ul></li>
</ul>

</nav>

<h1 id="hashing-encryption-and-encoding">Hashing, Encryption and Encoding</h1>

<h2 id="introduction">Introduction</h2>

<p>I&rsquo;ve <a href="/posts/security-basics/">written previously</a> (and in-depth) on the subject of security basics, using tools such as GPG, OpenSSH, OpenSSL, and Keybase. But this time I wanted to focus in on the differences between encryption and hashing, whilst also providing a slightly more concise reference point for those already familiar with these concepts.</p>

<p>Before we get started, let&rsquo;s see what we&rsquo;ll be covering:</p>

<ul>
<li><a href="#terminology">Terminology</a></li>
<li><a href="#hashing-vs-encryption">Hashing vs Encryption</a></li>
<li><a href="#mac-vs-hmac">MAC vs HMAC</a></li>
<li><a href="#base64-encoding">Base64 Encoding</a></li>
<li><a href="#random-password-generation">Random Password Generation</a></li>
<li><a href="#hash-functions">Hash Functions</a>

<ul>
<li>shasum</li>
<li>hashlib</li>
<li>cksum</li>
</ul></li>
<li><a href="#openssh">OpenSSH</a></li>
<li><a href="#openssl">OpenSSL</a>

<ul>
<li>Generating a key pair</li>
<li>Encrypting and Decrypting</li>
<li>Randomness</li>
</ul></li>
<li><a href="#gpg">GPG</a>

<ul>
<li>Generating a key pair</li>
<li>Automate</li>
<li>Asymmetrical Encryption and Decryption</li>
<li>Symmetrical Encryption and Decryption</li>
<li>Signing keys</li>
<li>Signing encrypted files</li>
</ul></li>
<li><a href="#keybase">Keybase</a></li>
</ul>

<h2 id="terminology">Terminology</h2>

<p>OK, so using the correct terminology is essential and helps us to be explicit and clear with what we really mean.</p>

<ul>
<li><p><strong>hash function</strong>:<br>
calculates a deterministic, irreversible, fixed-size alphanumeric string (based on input).</p></li>

<li><p><strong>message</strong>:<br>
a message <em>is</em> the data (e.g. the &lsquo;input&rsquo; provided to a hash function).</p></li>

<li><p><strong>digest</strong>:<br>
the hexidecimal output generated by a hash function (contextually referred to as &ldquo;checksum&rdquo; or &ldquo;fingerprint&rdquo;).</p></li>

<li><p><strong>symmetric algorithm</strong>:<br>
a cryptographic algorithm that uses the same key to encrypt and decrypt data.</p></li>

<li><p><strong>asymmetric algorithm</strong>:<br>
a form of encryption where keys come in pairs (what one key encrypts, only the other can decrypt).</p></li>

<li><p><strong>integrity</strong>:<br>
the message transported has not been tampered with or altered.</p></li>

<li><p><strong>confidentiality</strong>:<br>
the communication between trusted parties is confidential.</p></li>

<li><p><strong>authenticity</strong>:<br>
the communication is with who you expect it to be (not a man-in-the-middle).</p></li>
</ul>

<blockquote>
<p>For a longer &ldquo;Security Glossary&rdquo;, please see <a href="https://docs.google.com/document/d/1qs3jEIQvocdVhSxCSPLF1BoLnp91aLnuUIasvl-maYo/edit?usp=sharing" target="_blank">this Google doc</a> I created.</p>
</blockquote>

<h2 id="hashing-vs-encryption">Hashing vs Encryption</h2>

<p>In essence:</p>

<ul>
<li><strong>hashing</strong>: provides <em>integrity</em>.</li>
<li><strong>encryption</strong>: provides <em>confidentiality</em>.</li>
</ul>

<p>Often cryptographic primitives need to be combined. For example, <a href="/posts/security-basics/#public-key-cryptography">public-key cryptography</a> uses RSA (a slow, but very secure algorithm) for <em>communicating</em> securely, while internally using AES (a faster, but less secure algorithm †) for <em>encrypting</em> data with a shared key, while using a hash function for generating a message digest to ensure both parties can verify the <em>integrity</em> of the payload sent/received.</p>

<blockquote>
<p>† less secure in the sense that you have to share a secret key with the person you wish to communicate with, but that&rsquo;s what public-key cryptography helps to secure.</p>
</blockquote>

<h3 id="why-use-a-hash-function">Why use a hash function?</h3>

<p>Hash functions (or more specifically their output: <em>digests</em>) can be used for many things, like indexing data in a hash table, fingerprinting (i.e. detecting duplicate data or uniquely identifying files), or as a checksum (i.e. detecting data corruption).</p>

<p>Message authentication (i.e. message <em>integrity</em>) involves hashing the message to produce a digest and encrypting the digest with the private key to produce a digital signature.</p>

<p>In order to verify this &lsquo;signature&rsquo; the recipient of the encrypted message would need to compute a hash of the message, then decrypting the signer&rsquo;s public key and comparing the computed digest against the decrypted digest sent within the encrypted message.</p>

<p>If the digest you generated is the same as the decrypted digest, then we can be sure the message was delivered unmodified whilst in transit (e.g. &lsquo;man-in-the-middle&rsquo;).</p>

<h2 id="base64-encoding">Base64 Encoding</h2>

<p>Base64 is a way of taking binary data and transforming it into a text-based format. It is commonly used when there is a need to transfer the binary data over a medium that only supports textual data (e.g. you can Base64 encode images so they can be inlined into HTML).</p>

<p>How it works: Base64 encoding takes three bytes, each consisting of eight bits, and represents them as four printable characters in the ASCII standard.</p>

<blockquote>
<p>Note: Base64 encoded strings are NOT secure.<br>
Remember, it <em>encodes</em> data, not <em>encrypt</em> it.</p>
</blockquote>

<h2 id="mac-vs-hmac">MAC vs HMAC</h2>

<p>A &lsquo;MAC&rsquo; (Message Authentication Code) uses symmetrical cryptography with an encryption algorithm (such as AES †) to verify the integrity of a message, whereas a &lsquo;HMAC&rsquo; will use a hash function (such as SHA256) internally instead of an encryption algorithm.</p>

<blockquote>
<p>† encryption algorithms: AES (Advanced Encryption Standard), Blowfish, DES (Data Encryption Standard), Triple DES, Serpent, and Twofish.</p>
</blockquote>

<p>Below is an example HMAC written in <a href="https://www.gnu.org/software/bash/" target="_blank">Bash</a> and using the <a href="https://www.openssl.org/" target="_blank">OpenSSL</a> command-line tool.</p>

<pre><code>function hmac {
  digest=&quot;$1&quot;
  data=&quot;$2&quot;
  key=&quot;$3&quot;
  shift 3
  echo -n &quot;$data&quot; | openssl dgst &quot;-$digest&quot; -hmac &quot;$key&quot; &quot;$@&quot;
}
</code></pre>

<p>The way you would use it is as follows:</p>

<pre><code>hmac sha256 &quot;message to be hashed&quot; secret-key
</code></pre>

<blockquote>
<p>Note: you can swap <code>sha256</code> for any supported digest algorithm (see <code>openssl dgst -h</code> for details).</p>
</blockquote>

<p>Which would generate the digest output:</p>

<pre><code>44db14fe496c4bc4af5e8e6e3683e5db7acffa555897cf4b2b4345abaaf1ace3
</code></pre>

<p>Now because the implementation is using the <code>openssl</code> command, you can also choose to convert the hexidecimal output into binary and then Base64 encode that binary output, like so:</p>

<pre><code>hmac sha256 &quot;message to be hashed&quot; secret-key -binary | base64
</code></pre>

<p>Which outputs:</p>

<pre><code>RNsU/klsS8SvXo5uNoPl23rP+lVYl89LK0NFq6rxrOM=
</code></pre>

<p>You don&rsquo;t have to use an abstraction around the command obviously, you can just use:</p>

<pre><code>cat plaintext.txt | openssl dgst -sha512 -binary | base64
</code></pre>

<blockquote>
<p>Note: <code>base64</code> could be replaced with openssl&rsquo;s base64 encoding command: <code>openssl enc -base64 -A</code></p>
</blockquote>

<h2 id="random-password-generation">Random Password Generation</h2>

<p>Generating random passwords that are complex enough to make automated attacks difficult can be a bit tedious, yet important. But if you install a program such as <code>pwgen</code> (<code>brew install pwgen</code>) you&rsquo;ll be able to generate random and complex passwords very easily.</p>

<p>Once installed, add the following alias to your shell:</p>

<pre><code>alias psw=&quot;pwgen -sy 20 1&quot;
</code></pre>

<p>Now when you execute <code>psw</code> you&rsquo;ll get output that looks something like the following:</p>

<pre><code>|93&lt;3(M;r?~40c$A@&gt;{\
</code></pre>

<h2 id="hash-functions">Hash Functions</h2>

<p>There are many different ways of accessing a hash function, two options we&rsquo;ll look at will be using the executable <code>shasum</code> (provided by macOS) and the <code>hashlib</code> package provided by the <a href="https://www.python.org/" target="_blank">Python</a> programming language.</p>

<h3 id="shasum">shasum</h3>

<p>Let&rsquo;s generate a hexidecimal digest of the message <code>foobar</code> using the SHA512 hash algorithm:</p>

<pre><code>echo -n foobar | shasum -a 512
</code></pre>

<blockquote>
<p>Note: see <code>shasum -h</code> for all available algorithms.</p>
</blockquote>

<p>Which outputs:</p>

<pre><code>0a50261ebd1a390fed2bf326f2673c145582a6342d523204973d0219337f81616a8069b012587cf5635f6925f1b56c360230c19b273500ee013e030601bf2425
</code></pre>

<h3 id="hashlib">hashlib</h3>

<p>Let&rsquo;s again generate a hexidecimal digest of the message <code>foobar</code> using the SHA512 hash algorithm, now using Python:</p>

<pre><code>import hashlib
message = hashlib.sha512()
message.update(b&quot;foobar&quot;)
print(message.hexdigest())
</code></pre>

<p>Which outputs the same digest as the <code>shasum</code> command produced:</p>

<pre><code>0a50261ebd1a390fed2bf326f2673c145582a6342d523204973d0219337f81616a8069b012587cf5635f6925f1b56c360230c19b273500ee013e030601bf2425
</code></pre>

<h3 id="cksum">cksum</h3>

<p>Remember hash functions generate a digest of some message input, and one such use of that digest output is data corruption (i.e. a checksum).</p>

<p>The macOS also provides a <code>cksum</code> command which let&rsquo;s you generate a checksum, like so:</p>

<pre><code>echo foobar | cksum
</code></pre>

<p>Which outputs:</p>

<pre><code>857691210 7
</code></pre>

<p>The first number is the checksum and the second number is the amount of data in bytes.</p>

<h2 id="openssh">OpenSSH</h2>

<p>OpenSSH provides secure and encrypted tunneling capabilities and is typically used to enable secure shell connections from your machine to external servers.</p>

<p>In order to generate a cryptographically secure key pair, execute the following command:</p>

<pre><code>ssh-keygen -t rsa -b 4096 -C &quot;your.email@domain.com&quot;
</code></pre>

<p>This uses the RSA algorithm (which is the default, so the <code>-t</code> can be omitted) along with a key size of 4096 bits (the default is 2048).</p>

<p>The output of this command will be a public and private key pair.</p>

<p>It&rsquo;s usually best to generate these keys (or at least move them when generated) within the <code>~/.ssh</code> directory.</p>

<h3 id="ssh-agent">SSH Agent</h3>

<p>One thing that catches me out all the time is when I open a new terminal tab or shell instance and I go to push up some code changes to a remote server only to discover an error saying I&rsquo;m not authenticated. This is because the new terminal/shell instance doesn&rsquo;t have the SSH agent running which is what makes my SSH key pair available.</p>

<p>This happens so often I&rsquo;ve created an alias to make starting up the SSH agent and loading my SSH private key very quick and easy:</p>

<pre><code>alias sshagent='eval &quot;$(ssh-agent -s)&quot; &amp;&amp; ssh-add -K ~/.ssh/github_rsa'
</code></pre>

<blockquote>
<p>Note: the use of the <code>-K</code> flag is macOS specific, it means it&rsquo;ll add the key into the macOS keychain program.</p>
</blockquote>

<h2 id="openssl">OpenSSL</h2>

<p>OpenSSL is designed to provide a method for securing web based communication (think HTTPS/TLS/SSL).</p>

<blockquote>
<p>Note: for a full list of commands see: <code>openssl -h</code> and <code>openssl &lt;command&gt; -h</code>.</p>
</blockquote>

<h3 id="key-exchanges">Key Exchanges</h3>

<p>There are two popular key exchange algorithms:</p>

<ol>
<li>RSA</li>
<li>Diffie-Hellman</li>
</ol>

<p>For the specific details of each I recommend you read <a href="https://technet.microsoft.com/en-us/library/cc962035.aspx" target="_blank">this post on the differences</a>. In short RSA uses the person&rsquo;s public key to encrypt the secret, while Diffie-Hellman uses a mathematical function to ensure only those two people communicating can calculate the secret based on the information that&rsquo;s publicly available.</p>

<h3 id="generating-a-key-pair">Generating a key pair</h3>

<p>In order to generate a RSA based public/private key pair, execute the following commands:</p>

<pre><code># generate a private key
openssl genrsa -out private_key.pem 4096

# generate a public key, from the private key
openssl rsa -pubout -in private_key.pem -out public_key.pem
</code></pre>

<h3 id="encrypting-and-decrypting">Encrypting and Decrypting</h3>

<p>The following examples use symmetric encryption, and so you&rsquo;ll be asked for a secret key when encrypting and decrypting (although you could also use the <code>-pass</code> flag like so <code>-pass pass:&lt;your_password&gt;</code>, yeah the syntax is odd and it&rsquo;s the same for decrypting):</p>

<pre><code># symmetric encryption (you'll be asked for a key)
echo foobar | openssl enc -aes-256-cbc -out message.enc

# decrypt that encrypted message
openssl enc -aes-256-cbc -in message.enc -d
</code></pre>

<blockquote>
<p>Note: <code>.enc</code> is a commonly used format to indicate a file is encrypted (<code>.asc</code> is specifically used for asymmetric encryption).</p>
</blockquote>

<p>I&rsquo;m passing in the message via stdin (when encrypting), but specifying a file for the output (when decrypting), but you could use a file for both by explicitly specifying the <code>-in</code> and <code>-out</code> flags to provide a text file instead.</p>

<p>Annoyingly with <code>openssl</code> the same thing can be done a million different ways, so (for example) you might also find that you can do the above <em>without</em> the <code>enc</code> portion of the command (and thus removing the <code>-</code> prefix from the selected algorithm):</p>

<pre><code># symmetric encryption
echo foobar | openssl aes-256-cbc -out message.enc

# decrypt that encrypted message
openssl aes-256-cbc -in message.enc -d
</code></pre>

<h4 id="encoding">Encoding</h4>

<p>You can also generate Base64 output of the encrypted data, by using the <code>-a</code> flag like so:</p>

<pre><code>$ echo foobar | openssl aes-256-cbc -a

U2FsdGVkX19/L0WtkvCNlpMiQnvD1SWGM19lm4m6xK4=
</code></pre>

<blockquote>
<p>Note: see <code>man enc</code> for details</p>
</blockquote>

<h4 id="salts">Salts</h4>

<p>It&rsquo;s also worth mentioning that the default behaviour for OpenSSL is to use a &lsquo;salt&rsquo; when using encrypting the message. A salt is random data appended to your already hashed message and then that is hashed itself. In pseudo-code it would look like this:</p>

<pre><code>$pwd = hash(hash($password) + salt)
</code></pre>

<p>You would then store the value of <code>$pwd</code> in your database along with the salt itself.</p>

<p>The security doesn&rsquo;t come from obfuscating the salt, but more that a rainbow table attack can&rsquo;t now automatically loop/check its collection of hashed passwords. An attacker would need to incorporate your (per-user) unique salt value into their check against a predetermined list of hashes, and they also wouldn&rsquo;t know if the salt was prefixed or suffixed to the password itself. Making it computationally very expensive and time consuming to attempt.</p>

<p>You can also see that a salt is used by trying to read an encrypted file (<code>cat message.enc</code>):</p>

<pre><code>Salted__MJin¨MàÍ£?è,random¡:~randomW!5µõ
</code></pre>

<h4 id="asymmetrical-encryption">Asymmetrical Encryption</h4>

<p>If you need to you can use a public key to encrypt data with (i.e. asymmetrical encryption) by utilising the <code>openssl rsautl</code> command, which stands for &ldquo;RSA Utility&rdquo; and is commonly used to sign, verify, encrypt and decrypt data using the RSA algorithm.</p>

<p>In the following example we have a file <code>plaintext.txt</code> we encrypt using a public key. It will now only be possible to decrypt the <code>secret.enc</code> file if you have the corresponding private key:</p>

<pre><code># encrypting
openssl rsautl -encrypt -pubin -inkey public_key.pem -in plaintext.txt -out secret.enc

# decrypting
openssl rsautl -decrypt -inkey private_key.pem -in secret.enc
</code></pre>

<h3 id="randomness">Randomness</h3>

<p>OpenSSL also offers a way to generate random binary data which you can then export as either hexidecimal or base64 formats:</p>

<blockquote>
<p>Note: in the following examples, <code>64</code> is the number of bytes to be generated.</p>
</blockquote>

<pre><code>$ openssl rand 64

RR_wK[=q5}VrdMܾj{8(Ty]7;file://Integralist-MBPr/tmp

$ openssl rand 64 -hex

660baf33c189ced722a07c6a29d35a7e4584bb954c8c86f2cfd4ea8d892bff32fc188b0c56cbe0a56d60b628cdee697308b0cf3806cd95052b743bec5ccc5240

$ openssl rand 64 -base64

JIPU5SiCgKP3XVrnef1gY+PxjBvjdQgSN+OJoBAdWmCa/cRvDdFl01GQiSwFimQ5
1lVa/7hfYIK6Z5jjHNauaQ==
</code></pre>

<h2 id="gpg">GPG</h2>

<p>GPG is a tool which provides encryption and signing capabilities, and supports both symmetrical and asymmetrical encryption + digital signing of your encrypted content to ensure the integrity.</p>

<h3 id="generating-a-key-pair-1">Generating a key pair</h3>

<p>To generate a new GPG key pair you would execute the following command and interactively fill in the details:</p>

<pre><code>gpg --gen-key
</code></pre>

<h3 id="automate">Automate</h3>

<p>If you prefer to automate this you can create a file to contain the details and pass that into the command-line instead. The following code generates a new <code>batch_file</code> that will contain the information we would otherwise have to enter manually:</p>

<pre><code>$ cat &gt; batch_file &lt;&lt;EOF
     %echo Generating a basic OpenPGP key
     Key-Type: RSA
     Key-Length: 4096
     Subkey-Type: Default
     Name-Real: Your Name
     Name-Comment: Integralist testing
     Name-Email: foo@example.com
     Expire-Date: 0
     Passphrase: foobar
     %commit
     %echo done
EOF
</code></pre>

<p>Once we have this file we can pass it along with the <code>--gen-key</code> command:</p>

<pre><code>$ gpg --gen-key --batch batch_file

gpg: Generating a basic OpenPGP key
gpg: key 4BCAEAAD199B5FE8 marked as ultimately trusted
gpg: directory '/Users/Integralist/.gnupg/openpgp-revocs.d' created
gpg: revocation certificate stored as '/Users/Integralist/.gnupg/openpgp-revocs.d/CFE96536285D83C990567BF64BCAEAAD199B5FE8.rev'
gpg: done
</code></pre>

<p>Now if we check our list of keys we&rsquo;ll see the new one we just generated:</p>

<pre><code>$ gpg --list-keys

/Users/Integralist/.gnupg/pubring.gpg
---------------------------------------
pub   rsa4096 2018-02-17 [SCEA]
      CFE96536285D83C990567BF64BCAEAAD199B5FE8
uid           [ultimate] Your Name (Integralist testing) &lt;foo@example.com&gt;
sub   rsa2048 2018-02-17 [E]
</code></pre>

<h3 id="revocation">Revocation</h3>

<p>When you generate a new key pair, if you intend on publishing your public key online, then you&rsquo;ll want to generate a revocation certificate. Doing this will mean you can revoke your original key pair if your private key becomes compromised (or you just want to decommission it):</p>

<pre><code>gpg --gen-revoke your.email@domain.com
</code></pre>

<p>When you&rsquo;re ready to decommission it, just import the certifcate into your keyring:</p>

<pre><code>gpg --import revocation.cert
</code></pre>

<p>You can then also push up your key identifier to a key server to force it to recognise the key has been revoked:</p>

<pre><code>gpg --keyserver pgp.mit.edu --send-keys &lt;key_id&gt;
</code></pre>

<h3 id="asymmetrical-encryption-and-decryption">Asymmetrical Encryption and Decryption</h3>

<p>In order to encrypt some data using someone elses public key (i.e. so only they can decrypt the data) you first need access to their public key and have it imported to your gpg keyring:</p>

<pre><code>gpg --import public.key
</code></pre>

<p>If you want to verify the integrity of the public key you have acquired, then you should speak securely with the recipient who owns the public key and ask them to give you their digital &lsquo;fingerprint&rsquo;. You can then verify it matches what you have using the following command:</p>

<pre><code>gpg --fingerprint &lt;pub_key_id&gt;
</code></pre>

<p>You&rsquo;ll then look for the fingerprint in the gpg output. The fingerprint should look something like this:</p>

<pre><code>FDFB E9B5 24BA 6972 A3AA 44B9 A1B1 7E6F DD86 E7F5
</code></pre>

<p>The command for encrypting a file <code>plaintext.txt</code> using their public key would be:</p>

<pre><code>gpg --encrypt -u &quot;Sender User Name&quot; -r &quot;Receiver User Name&quot; plaintext.txt
</code></pre>

<p>As you&rsquo;ve encrypted the file using that person&rsquo;s public key, it means they can decrypt the file simply with:</p>

<pre><code>gpg -d plaintext.txt.gpg
</code></pre>

<h3 id="symmetrical-encryption-and-decryption">Symmetrical Encryption and Decryption</h3>

<p>By default gpg uses the AES algorithm for its symmetrical encryption. The command to use is (you&rsquo;ll be asked to provide a passphrase):</p>

<pre><code>gpg --symmetric plaintext.txt
</code></pre>

<p>You can specify a different algorithm, as the default isn&rsquo;t as secure as it could be. Let&rsquo;s use a 256bit encryption key:</p>

<pre><code>gpg --symmetric --cipher-algo AES256 plaintext.txt
</code></pre>

<blockquote>
<p>Note: see <code>gpg --version</code> for all available ciphers</p>
</blockquote>

<h3 id="signing-keys">Signing keys</h3>

<p>If you want to explicitly trust a public key you have imported, you can &lsquo;sign&rsquo; it. You do this using the <code>--sign-key</code> flag. Doing this can also be beneficial for the owner of that public key (Bob), because if a friend of yours (Alice) trusts <em>you</em> and they see you&rsquo;ve signed Bob&rsquo;s public key, then Alice is more likely to trust Bob as well.</p>

<p>In order for Bob to benefit from this &lsquo;web of trust&rsquo; you need to send him back his public key which you signed. Bob would need to import that version of his public key back into his gpg keyring, so that he can then republish it online for others to see the <em>you</em> trust him.</p>

<p>The following example demonstrates how you would export Bob&rsquo;s public key, which you previously imported and signed:</p>

<pre><code>gpg --export --armor bob@example.org
</code></pre>

<blockquote>
<p>Note: <code>--armor</code> simply outputs the binary data as ASCII</p>
</blockquote>

<h3 id="signing-encrypted-files">Signing encrypted files</h3>

<p>It can be useful to sign a file that you encrypt, so that the person who will decrypt the file can verify it was you who sent it to them, and also check that the integrity of the file is still intact.</p>

<blockquote>
<p>Note: this provides a combination of <em>authenticity</em> and <em>integrity</em> (as defined within the <a href="#1">terminology section</a>)</p>
</blockquote>

<p>You do this by using the <code>--sign</code> flag:</p>

<pre><code>gpg --local-user Bob --encrypt --recipient Alice --sign plaintext.txt
</code></pre>

<blockquote>
<p>Note: I&rsquo;m using <code>--local-user</code> because I have many different key pairs setup for testing.</p>
</blockquote>

<p>This will generate a <code>plaintext.txt.gpg</code> encrypted file.</p>

<p>The recipient (Alice), can either decrypt the file using Bob&rsquo;s public key and this will both decrypt and verify the signature, or Alice could just use the <code>--verify</code> flag if she didn&rsquo;t want to decrypt the file.</p>

<pre><code>$ gpg --verify plaintext.txt.gpg

gpg: Signature made Mon Feb 19 10:16:38 2018 GMT
gpg:                using RSA key F2G91BE243E405E5B64B08A1CB5EBDB2561C861B
gpg: Good signature from &quot;Bob &lt;bob@example.com&gt;&quot; [ultimate]
</code></pre>

<h2 id="keybase">Keybase</h2>

<p><a href="https://keybase.io/" target="_blank">Keybase</a> is a public-key directory that maps social media identities to encryption keys in a publicly auditable manner. Keybase offers an end-to-end encrypted chat and cloud storage system, called Keybase Chat and the Keybase filesystem.</p>

<p>In order to use the command-line tool <code>keybase</code> you&rsquo;ll need to register for an account on their website.</p>

<p>To install keybase on macOS:</p>

<pre><code>brew install keybase
</code></pre>

<p>Once installed you&rsquo;ll need to login:</p>

<pre><code>keybase login
</code></pre>

<p>At this point you can either generate a fresh key pair or select an existing gpg key pair:</p>

<pre><code># generate new key pair
keybase pgp gen

# select existing key pair
keybase pgp select
</code></pre>

<p>You can search for other keybase users:</p>

<pre><code>keybase search sthulb
</code></pre>

<p>You can then encrypt data for another keybase user, like so:</p>

<pre><code>keybase encrypt -i info.txt -o info.txt.asc sthulb
</code></pre>

<p>If you receive an encrypted file you can decrypt it, like so:</p>

<pre><code>keybase decrypt -i info.txt.asc -o info.txt
</code></pre>

<p>If you receive an encrypted file (<code>info.txt.gpg</code>) using your keybase pub key but the senders <em>not</em> using keybase (e.g. they&rsquo;ve encrypted the file using their own gpg private key), then you&rsquo;ll need to have their public key in your gpg keyring:</p>

<pre><code>keybase pgp decrypt -i info.txt.gpg
</code></pre>

          </section>
        </div>
      </div>
      <!-- Sidebar -->
<div id="sidebar">
  <div class="inner">
    <!-- Search -->
    <!--<section id="search" class="alt">-->
    <!--  <form method="post" action="#">-->
    <!--    <input type="text" name="query" id="query" placeholder="Search" />-->
    <!--  </form>-->
    <!--</section>-->
    <!-- Menu -->
    <nav id="menu">
      <header class="major">
        <h2>Menu</h2>
      </header>
      <ul>
        <li><a href="../../index.html">Home</a></li>
        <!--<li><a href="../resume/index.html">Resume</a></li>-->
				
	<li>
	  <span class="opener">Pages</span>
	  <ul>
		
	<li><a href="../../pages/christmas-movies/index.html">Christmas Movies</a></li>
	
	<li><a href="../../pages/resume/index.html">Resume</a></li>
	
	  </ul>
	</li>
	
	<li>
	  <span class="opener">2024</span>
	  <ul>
		
	<li><a href="../../posts/go-concurrency-patterns/index.html">Go Concurrency Patterns</a></li>
	
	<li><a href="../../posts/bitwise-operations-in-go/index.html">Bitwise Operations In Go</a></li>
	
	<li><a href="../../posts/go-typed-nil/index.html">Go Typed Nil</a></li>
	
	<li><a href="../../posts/programming-at-the-edge-with-fastly-compute/index.html">Programming At The Edge With Fastly Compute</a></li>
	
	<li><a href="../../posts/ci-cd-with-terraform-cloud-and-github-actions/index.html">Ci Cd With Terraform Cloud And Github Actions</a></li>
	
	  </ul>
	</li>
	
	<li>
	  <span class="opener">2023</span>
	  <ul>
		
	<li><a href="../../posts/openapi/index.html">Openapi</a></li>
	
	  </ul>
	</li>
	
	<li>
	  <span class="opener">2022</span>
	  <ul>
		
	<li><a href="../../posts/terraform-build-a-provider/index.html">Terraform Build A Provider</a></li>
	
	<li><a href="../../posts/rust-smart-pointers/index.html">Rust Smart Pointers</a></li>
	
	<li><a href="../../posts/laptop-setup-v2/index.html">Laptop Setup V2</a></li>
	
	<li><a href="../../posts/go-install/index.html">Go Install</a></li>
	
	<li><a href="../../posts/neovim-rust-go/index.html">Neovim Rust Go</a></li>
	
	<li><a href="../../posts/vim-themes/index.html">Vim Themes</a></li>
	
	<li><a href="../../posts/dev-tools/index.html">Dev Tools</a></li>
	
	<li><a href="../../posts/go-style-guide/index.html">Go Style Guide</a></li>
	
	  </ul>
	</li>
	
	<li>
	  <span class="opener">2021</span>
	  <ul>
		
	<li><a href="../../posts/vim-advanced/index.html">Vim Advanced</a></li>
	
	<li><a href="../../posts/rust-ownership/index.html">Rust Ownership</a></li>
	
	<li><a href="../../posts/github-actions/index.html">Github Actions</a></li>
	
	  </ul>
	</li>
	
	<li>
	  <span class="opener">2020</span>
	  <ul>
		
	<li><a href="../../posts/go-reflection/index.html">Go Reflection</a></li>
	
	<li><a href="../../posts/software-comparison/index.html">Software Comparison</a></li>
	
	<li><a href="../../posts/rate-limiting/index.html">Rate Limiting</a></li>
	
	<li><a href="../../posts/git-internals/index.html">Git Internals</a></li>
	
	<li><a href="../../posts/python-context-managers/index.html">Python Context Managers</a></li>
	
	  </ul>
	</li>
	
	<li>
	  <span class="opener">2019</span>
	  <ul>
		
	<li><a href="../../posts/python-generators/index.html">Python Generators</a></li>
	
	<li><a href="../../posts/tox-ini/index.html">Tox Ini</a></li>
	
	<li><a href="../../posts/python-app-dependencies/index.html">Python App Dependencies</a></li>
	
	<li><a href="../../posts/python-asyncio/index.html">Python Asyncio</a></li>
	
	<li><a href="../../posts/go-arrays-and-slices/index.html">Go Arrays And Slices</a></li>
	
	<li><a href="../../posts/anonymity/index.html">Anonymity</a></li>
	
	<li><a href="../../posts/http-caching-guide/index.html">Http Caching Guide</a></li>
	
	<li><a href="../../posts/laptop-setup/index.html">Laptop Setup</a></li>
	
	<li><a href="../../posts/git-multiple-branches/index.html">Git Multiple Branches</a></li>
	
	<li><a href="../../posts/algorithms-in-python/index.html">Algorithms In Python</a></li>
	
	<li><a href="../../posts/remote-working/index.html">Remote Working</a></li>
	
	<li><a href="../../posts/python-mocking/index.html">Python Mocking</a></li>
	
	<li><a href="../../posts/calculating-big-o/index.html">Calculating Big O</a></li>
	
	<li><a href="../../posts/algorithmic-complexity-in-python/index.html">Algorithmic Complexity In Python</a></li>
	
	<li><a href="../../posts/data-types-and-data-structures/index.html">Data Types And Data Structures</a></li>
	
	<li><a href="../../posts/design-python/index.html">Design Python</a></li>
	
	  </ul>
	</li>
	
	<li>
	  <span class="opener">2018</span>
	  <ul>
		
	<li><a href="../../posts/js-modern/index.html">Js Modern</a></li>
	
	<li><a href="../../posts/engineer-to-manager/index.html">Engineer To Manager</a></li>
	
	<li><a href="../../posts/interview-techniques/index.html">Interview Techniques</a></li>
	
	<li><a href="../../posts/post-mortems/index.html">Post Mortems</a></li>
	
	<li><a href="../../posts/slackbot-opsbot/index.html">Slackbot Opsbot</a></li>
	
	<li><a href="../../posts/go-interfaces/index.html">Go Interfaces</a></li>
	
	<li><a href="../../posts/multigrain-services/index.html">Multigrain Services</a></li>
	
	<li><a href="../../posts/authentication-with-aws-cognito/index.html">Authentication With Aws Cognito</a></li>
	
	<li><a href="../../posts/a-guide-to-effective-1-1-meetings/index.html">A Guide To Effective 1 1 Meetings</a></li>
	
	<li><a href="../../posts/project-management/index.html">Project Management</a></li>
	
	<li><a href="../../posts/reading-list/index.html">Reading List</a></li>
	
	<li><a href="../../posts/python-security/index.html">Python Security</a></li>
	
	<li><a href="../../posts/static-site-search/index.html">Static Site Search</a></li>
	
	<li><a href="../../posts/interview-topics/index.html">Interview Topics</a></li>
	
	<li><a href="../../posts/go-reverse-proxy/index.html">Go Reverse Proxy</a></li>
	
	<li><a href="../../posts/hashing-encryption-encoding/index.html">Hashing Encryption Encoding</a></li>
	
	<li><a href="../../posts/computers-101/index.html">Computers 101</a></li>
	
	  </ul>
	</li>
	
	<li>
	  <span class="opener">2017</span>
	  <ul>
		
	<li><a href="../../posts/statistics-basics/index.html">Statistics Basics</a></li>
	
	<li><a href="../../posts/queue-best-practices/index.html">Queue Best Practices</a></li>
	
	<li><a href="../../posts/monitoring-best-practices/index.html">Monitoring Best Practices</a></li>
	
	<li><a href="../../posts/load-testing-guidelines/index.html">Load Testing Guidelines</a></li>
	
	<li><a href="../../posts/logging-101/index.html">Logging 101</a></li>
	
	<li><a href="../../posts/fastly-varnish/index.html">Fastly Varnish</a></li>
	
	<li><a href="../../posts/profiling-python/index.html">Profiling Python</a></li>
	
	<li><a href="../../posts/profiling-go/index.html">Profiling Go</a></li>
	
	<li><a href="../../posts/dev-environments-within-docker-containers/index.html">Dev Environments Within Docker Containers</a></li>
	
	  </ul>
	</li>
	
	<li>
	  <span class="opener">2016</span>
	  <ul>
		
	<li><a href="../../posts/key-architecture/index.html">Key Architecture</a></li>
	
	<li><a href="../../posts/go-hitchhikers-guide/index.html">Go Hitchhikers Guide</a></li>
	
	<li><a href="../../posts/concepts-from-the-c-programming-language/index.html">Concepts From The C Programming Language</a></li>
	
	<li><a href="../../posts/man-pages/index.html">Man Pages</a></li>
	
	<li><a href="../../posts/c-and-syscalls/index.html">C And Syscalls</a></li>
	
	<li><a href="../../posts/bits-and-bytes/index.html">Bits And Bytes</a></li>
	
	<li><a href="../../posts/terminal-password-manager/index.html">Terminal Password Manager</a></li>
	
	<li><a href="../../posts/terminal-utils/index.html">Terminal Utils</a></li>
	
	<li><a href="../../posts/github-pull-request-formatting/index.html">Github Pull Request Formatting</a></li>
	
	<li><a href="../../posts/big-o-for-beginners/index.html">Big O For Beginners</a></li>
	
	<li><a href="../../posts/the-perfect-developer/index.html">The Perfect Developer</a></li>
	
	<li><a href="../../posts/git-merge-strategies/index.html">Git Merge Strategies</a></li>
	
	<li><a href="../../posts/grpc-for-beginners/index.html">Grpc For Beginners</a></li>
	
	<li><a href="../../posts/bash-watchtower/index.html">Bash Watchtower</a></li>
	
	<li><a href="../../posts/rpc-variations-in-go/index.html">Rpc Variations In Go</a></li>
	
	  </ul>
	</li>
	
	<li>
	  <span class="opener">2015</span>
	  <ul>
		
	<li><a href="../../posts/go-func-type/index.html">Go Func Type</a></li>
	
	<li><a href="../../posts/github-multiple-ssh/index.html">Github Multiple Ssh</a></li>
	
	<li><a href="../../posts/http2/index.html">Http2</a></li>
	
	<li><a href="../../posts/building-systems-with-make/index.html">Building Systems With Make</a></li>
	
	<li><a href="../../posts/client-cert-authentication/index.html">Client Cert Authentication</a></li>
	
	<li><a href="../../posts/dns-101/index.html">Dns 101</a></li>
	
	<li><a href="../../posts/security-basics/index.html">Security Basics</a></li>
	
	<li><a href="../../posts/docker-nginx/index.html">Docker Nginx</a></li>
	
	<li><a href="../../posts/designing-for-simplicity/index.html">Designing For Simplicity</a></li>
	
	  </ul>
	</li>
	
	<li>
	  <span class="opener">2014</span>
	  <ul>
		
	<li><a href="../../posts/concurrency/index.html">Concurrency</a></li>
	
	<li><a href="../../posts/github-workflow/index.html">Github Workflow</a></li>
	
	<li><a href="../../posts/functional-recursive-javascript-programming/index.html">Functional Recursive Javascript Programming</a></li>
	
	  </ul>
	</li>
	
	<li>
	  <span class="opener">2013</span>
	  <ul>
		
	<li><a href="../../posts/refactoring-techniques/index.html">Refactoring Techniques</a></li>
	
	<li><a href="../../posts/design-mvcp/index.html">Design Mvcp</a></li>
	
	<li><a href="../../posts/basic-shell-scripting/index.html">Basic Shell Scripting</a></li>
	
	<li><a href="../../posts/clean-coder/index.html">Clean Coder</a></li>
	
	<li><a href="../../posts/message-passing-in-object-oriented-code/index.html">Message Passing In Object Oriented Code</a></li>
	
	<li><a href="../../posts/design-oop/index.html">Design Oop</a></li>
	
	  </ul>
	</li>
	
	<li>
	  <span class="opener">2012</span>
	  <ul>
		
	<li><a href="../../posts/git-tips/index.html">Git Tips</a></li>
	
	<li><a href="../../posts/maintainable-css-with-bem/index.html">Maintainable Css With Bem</a></li>
	
	<li><a href="../../posts/host-methods-vs-native-methods/index.html">Host Methods Vs Native Methods</a></li>
	
	<li><a href="../../posts/javascript-101/index.html">Javascript 101</a></li>
	
	  </ul>
	</li>
	
      </ul>
    </nav>
    <!-- Section -->
		<!--
    <section>
      <header class="major">
        <h2>Highlights</h2>
      </header>
      <div class="mini-posts">
        <article>
          <a href="ppv-survivorseries-88.html" class="image"><img src="../images/survivor-88-index.jpg" alt="" /></a>
          <p>Get ready for the ultimate showdown as Survivor Series 1988 brings non-stop tag team action, fierce rivalries, and unforgettable battles between the biggest WWF superstars!</p>
        </article>
        <article>
          <a href="ppv-royalrumble-89.html" class="image"><img src="../images/rumble-89-index.jpg" alt="" /></a>
          <p>Royal Rumble 1989 unleashes chaos with 30 superstars battling for glory in an unforgettable over-the-top-rope showdown!</p>
        </article>
        <article>
          <a href="ppv-summerslam-88.html" class="image"><img src="../images/slam-88-index.jpg" alt="" /></a>
          <p>SummerSlam 1988 delivers explosive action with iconic matchups, as the WWF's biggest stars collide in the hottest event of the summer!</p>
        </article>
      </div>
    </section>
		-->
    <!-- Section -->
    <!--<section>-->
    <!--  <header class="major">-->
    <!--    <h2>Get in touch</h2>-->
    <!--  </header>-->
    <!--  <p>Sed varius enim lorem ullamcorper dolore aliquam aenean ornare velit lacus, ac varius enim lorem ullamcorper dolore. Proin sed aliquam facilisis ante interdum. Sed nulla amet lorem feugiat tempus aliquam.</p>-->
    <!--  <ul class="contact">-->
    <!--    <li class="icon solid fa-envelope"><a href="#">information@untitled.tld</a></li>-->
    <!--    <li class="icon solid fa-phone">(000) 000-0000</li>-->
    <!--    <li class="icon solid fa-home">1234 Somewhere Road #8254<br />-->
    <!--      Nashville, TN 00000-0000</li>-->
    <!--  </ul>-->
    <!--</section>-->
    <!-- Footer -->
    <footer id="footer">
      <p class="copyright">&copy; Integralist. All rights reserved.</p>
      <p class="copyright small">Demo Images: <a href="https://unsplash.com">Unsplash</a>. Design: <a href="https://html5up.net">HTML5 UP</a>.</p>
    </footer>
  </div>
</div>

    </div>
    <!-- Scripts -->
    <script src="../../assets/js/jquery.min.js"></script>
    <script src="../../assets/js/browser.min.js"></script>
    <script src="../../assets/js/breakpoints.min.js"></script>
    <script src="../../assets/js/util.js"></script>
    <script src="../../assets/js/main.js"></script>

		<!-- The following script is for handling the automatic TOC generated by `make build` -->
		<script>
		// Get references to the elements
		const nav = document.querySelector('#main nav');
		const h1 = document.querySelector('#main h1');

		// Move the `nav` element to be underneath the `h1`
		h1.insertAdjacentElement('afterend', nav);

		// Hide the `nav` element by default using inline styles
		nav.style.display = 'none';

		// Create a new `h2` element with the text "TOC"
		const toc = document.createElement('h2');
		toc.textContent = 'TOC';
		toc.className = "toc"

		// Add inline styles to make the `h2` look clickable
		// DISABLED: done with className
		//
		// toc.style.cursor = 'pointer';
		// toc.style.color = 'blue';
		// toc.style.textDecoration = 'underline';

		// Add a click event listener to toggle the visibility of the `nav`
		toc.addEventListener('click', () => {
				nav.style.display = nav.style.display === 'none' ? 'block' : 'none';
		});

		// Insert the `h2` element above the `nav`
		nav.insertAdjacentElement('beforebegin', toc);
		</script>

		<!-- The following script highlights the current page in the side nav -->
		<script>
		// Get the current page's URL path and normalize it
    const currentUrl = window.location.pathname;
    const normalizedCurrentUrl = currentUrl
        .replace(/.*\/(pages|posts)\//, '/$1/') // Ensure leading slash and extract from `pages/` or `posts/`
        .replace(/index\.html$/, ''); // Remove `index.html` suffix

    // Select all menu links
    const links = document.querySelectorAll('#menu ul li a');

    let matchedParentSpan = null;

    links.forEach(link => {
        // Normalize the link's href for comparison
        const normalizedHref = link.getAttribute('href')
            .replace(/^(\.\.\/)+/, '/') // Convert `../../` to `/` for consistency
            .replace(/index\.html$/, ''); // Remove `index.html` suffix

        // Check if the normalized href matches the normalized current URL
        if (normalizedHref === normalizedCurrentUrl) {
            // Add the inline style to the matching link
            link.style.color = 'black';

            // Find the parent span with the class 'opener'
            matchedParentSpan = link.closest('ul').previousElementSibling;
        }
    });

    // If a matching parent span was found, add the 'active' class
    if (matchedParentSpan && matchedParentSpan.classList.contains('opener')) {
        matchedParentSpan.classList.add('active');
    }
		</script>
  </body>
</html>
