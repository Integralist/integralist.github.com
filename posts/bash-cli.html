<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, minimal-ui">
        <title>Bash custom shell command</title>
        <link rel="stylesheet" href="../styles/github-markdown.css">
        <link rel="stylesheet" href="../styles/prism-default.css">
        <style>
            body {
                min-width: 200px;
                max-width: 790px;
                margin: 0 auto;
                padding: 30px;
            }

            pre[class*="language-"] {
              border: 1px dashed #AAA;
              margin-bottom: 1em;
            }
        </style>
    </head>
    <body>
        <article class="markdown-body">

<h1>Bash custom shell command</h1>

<p>Super short post on creating your own custom shell command using Bash. You could do something very advanced using a general purpose or system level programming language such as <a href="http://golang.org/">Go</a>, but most of the time a simple shell script will suffice.</p>

<p>The downside of using a shell script is that you have to to either source it <code>source ~/foo.sh</code> or execute it direcly <code>bash ~/foo.sh</code>. The best way to work around this is to do the following:</p>

<ul>
<li>Specify a binary</li>
<li>Write your script (inc. reference to any special variables)</li>
<li>Name your script to reflect the name of the command you want to use</li>
<li>Move the script into a location that your <code>$PATH</code> can access</li>
<li>Set the script to be executable</li>
</ul>

<p>Here is our script:</p>

<pre><code class="language-bash">#! /bin/bash

echo &quot;hello $1&quot;
</code></pre>

<p>As you can see the file specifies the <code>bash</code> binary as the executable to use when the user executes this script, followed by the special variable <code>$1</code> which refers to the first argument provided by the user (e.g. <code>&lt;your_command&gt; arg1 arg2 arg3</code>).</p>

<blockquote>
<p>Note: you can use the bash default-value syntax <code>${1:-foo}</code> where this equates to: if a <code>$1</code> value hasn&#39;t been provided, then use the value <code>foo</code></p>
</blockquote>

<p>We&#39;ll save this file as <code>testz</code> (no file extension) into the folder <code>/usr/local/bin</code>, which is accessible from our <code>$PATH</code>. We can see this by running <code>echo $PATH</code>.</p>

<p>Because we save the file into a location accessible to <code>$PATH</code> it means we can just reference the name of the file and it&#39;ll be found and executed (hence we specify in the file what type of binary should be used to execute the file).</p>

<p>The only other thing we need to do is to ensure our users can execute the file. To do this, run the following:</p>

<pre><code class="language-bash">chmod +x /usr/local/bin/testz
</code></pre>

<p>Now we can use this new custom command like so:</p>

<pre><code class="language-bash">testz mark
</code></pre>

<p>Doing this will result in the following <code>stdout</code> result <code>hello mark</code></p>

<p>So in future if you want to do some simple scripting and have it abstracted into a custom command, then these tips should help.</p>

            <hr>
            <h2>Links</h2>
            <ul>
                <li><a href="../index.html">Home</a></li>
                <li><a href="../posts/about.html">About Me</a></li>
                <li><a href="https://github.com/integralist">GitHub</a></li>
                <li><a href="https://twitter.com/integralist">Twitter</a></li>
                <li><a href="http://www.integralist.co.uk/Resume">Resume</a></li>
            </ul>
        </article>
        <script src="../scripts/prism.js"></script>
        <script>
            var _gaq=[['_setAccount','UA-33159515-1'],['_trackPageview']];
            (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
            g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
            s.parentNode.insertBefore(g,s)}(document,'script'));
        </script>
    </body>
</html>
