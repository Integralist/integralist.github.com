<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, minimal-ui">
        <title>GitHub Pull Request Formatting</title>
        <link rel="stylesheet" href="../styles/github-markdown.css">
        <link rel="stylesheet" href="../styles/prism-default.css">
        <style>
            body {
                min-width: 200px;
                max-width: 790px;
                margin: 0 auto;
                padding: 30px;
            }

            pre[class*="language-"] {
              border: 1px dashed #AAA;
              margin-bottom: 1em;
            }
        </style>
    </head>
    <body>
        <article class="markdown-body">

<h1>GitHub Pull Request Formatting</h1>

<ul>
<li><a href="#1">Introduction</a></li>
<li><a href="#2">Why</a></li>
<li><a href="#3">Size</a></li>
<li><a href="#4">Process</a></li>
<li><a href="#5">Communication</a></li>
<li><a href="#6">Merge Strategies</a></li>
<li><a href="#7">Conclusion</a></li>
</ul>

<div id="1"></div>

<h2>Introduction</h2>

<p>What makes a good Pull Request? The answer will depend on your team, and to a certain extent your organisation.</p>

<p>Currently I work at BuzzFeed, and prior to that I worked at the BBC.</p>

<p>Both have a large number of engineers and teams, but due to different organisational structures they have differing opinions on what constitutes a good pull request format.</p>

<p>These opinions aren&#39;t happening at the organisational level either, but are very much &#39;team&#39; specific. Teams work differently and so have different needs.</p>

<p>Below I discuss some ideas around what I&#39;ve used in the past and what I&#39;m using today and I&#39;ll leave it as an exercise for the reader to determine what parts they decide to takeaway with them.</p>

<div id="2"></div>

<h2>Why</h2>

<p>Probably the most important part of a pull request is understanding <em>why</em> the change is needed in the first place.</p>

<p>What exactly are you changing? and does is it even needed?</p>

<p>Are you solving a problem that promotes a real business requirement, or are you just added a nice feature that doesn&#39;t actually serve to improve the end user&#39;s experience?</p>

<p>Maybe the feature you&#39;re adding is an internal improvement (e.g. refactor, dev tooling etc). That&#39;s fine and I guess it comes down to how <em>your</em> team priorities its work.</p>

<p>But taking a moment to stop and think about a new code change <em>before</em> you start working on it, is an important step to take.</p>

<div id="3"></div>

<h2>Size</h2>

<p>Pull requests should be small.</p>

<p>A large pull request that touches many different files across a project and has many different side effects, outcomes and responsibilities is extremely difficult to reason about from the perspective of the person reviewing the code.</p>

<p>Small pull requests allow for quicker reviews and merging. It promotes an <em>iterative</em> approach to implementing new features. It also helps to avoid conflicts when merging or rebasing.</p>

<p>We&#39;re also able to &#39;fail fast&#39; if oue work priorities change and we need to switch gears or change direction altogether. We&#39;re not trying to solve every problem all at once.</p>

<div id="4"></div>

<h2>Process</h2>

<p>Pull requests should be opened almost immediately, to allow for team feedback and help in direction (depending on what you need).</p>

<p>For me, this typically means making a single, small change and opening a pull request around it.</p>

<p>Once the pull request is open I utilise &#39;labels&#39; to signify the state of the pull request: wip (work in progress), rtr (ready to review), rtm (ready to merge), help (I actively <em>want</em> engineers to chip in early and help me flesh out the design if they see something wrong).</p>

<p>I ensure I have a good pull request description that indicates <em>what</em> the problem is that the pull request solves and <em>how</em> it solves that problem. In markdown that would look something like:</p>

<pre><code class="language-markdown">**Problem**: ...
**Solution**: ...

**Notes**: 

...

**Todo**:

- [ ] ...
- [ ] ...
- [ ] ...

**Screen Shots**:

![image alt text](http://some-image)
</code></pre>

<p>As you can see above, this is a generic template. I like to have the problem and solution lines to be very concise and not to take up multiple lines.</p>

<p>The &#39;notes&#39; section can be multiple lines so I keep it as an isolated section. This section can also include things like automated code linting or test suite coverage results.</p>

<p>The &#39;todo&#39; section helps me to keep track of what tasks I have in order to complete this pull request, but it also helps other engineers to understand my thought process and see where I might be going <em>before</em> I even get there (allowing the team to ask questions or make suggestions as per the <code>help</code> label).</p>

<p>Finally, the &#39;screen shots&#39; section is useful for those unfamiliar with the side effects of the change to be able to visually identify where the change appears or what it looks like. This isn&#39;t always necessary, depending on the code change being made, but is useful for UI changes.</p>

<div id="5"></div>

<h2>Communication</h2>

<p>It&#39;s important to notify fellow team members that your pull request exists, in order for them to provide appropriate feedback.</p>

<p>You can manually <code>@&lt;username&gt;</code> people within a comment in the pull request, or you could create a team in GitHub and then <code>@&lt;team-name&gt;</code> instead (helps especially for teams who like to rotate members across other teams within an organisation).</p>

<div id="6"></div>

<h2>Merge Strategies</h2>

<p>I&#39;ve written in the past about different &#39;<a href="http://www.integralist.co.uk/posts/git-merge-strategies.html">git merge strategies</a>&#39;. My preferred way is to <code>git merge --squash</code>, and luckily GitHub&#39;s UI provides a &#39;one click&#39; way to squash merge a pull request. </p>

<p>That&#39;s what I suggest using for merging pull requests into <code>master</code>, but you may have different requirements in your team/organisation, so pick whatever works best.</p>

<div id="7"></div>

<h2>Conclusion</h2>

<p>So this has been <em>my</em> preferred approach to creating a good pull request.</p>

<p>To recap, here is a top level look at the structure and concepts I suggest:</p>

<ul>
<li>Small pull request</li>
<li>Utilise labels to indicate status</li>
<li>Consistent formatting:

<ul>
<li>Gif (optional)</li>
<li>Problem/Solution</li>
<li>Notes (optional)</li>
<li>Todos (optional)</li>
<li>Screen shot images (optional)</li>
</ul></li>
<li>Agree a merge strategy for team consistency</li>
</ul>

            <hr>
            <h2>Links</h2>
            <ul>
                <li><a href="../index.html">Home</a></li>
                <li><a href="../posts/about.html">About Me</a></li>
                <li><a href="https://github.com/integralist">GitHub</a></li>
                <li><a href="https://twitter.com/integralist">Twitter</a></li>
                <li><a href="http://www.integralist.co.uk/resume">Resume</a></li>
            </ul>
        </article>
        <script src="../scripts/prism.js"></script>
        <script>
            var _gaq=[['_setAccount','UA-33159515-1'],['_trackPageview']];
            (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
            g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
            s.parentNode.insertBefore(g,s)}(document,'script'));
        </script>
    </body>
</html>
